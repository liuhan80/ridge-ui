(()=>{var e,t,i={194:(e,t,i)=>{var n=i(591),r=i(688);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.id,r,""]]);n(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},216:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i(253),r=i.n(n)()(!1);r.push([e.id,".stack-container {\r\n    width: 100%;\r\n    height: 100%;\r\n    position: relative;\r\n    box-sizing: border-box;\r\n}\r\n",""]);const o=r},253:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=function(e,t){var i,n,r,o=e[1]||"",l=e[3];if(!l)return o;if(t&&"function"==typeof btoa){var s=(i=l,n=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),"/*# ".concat(r," */")),a=l.sources.map((function(e){return"/*# sourceURL=".concat(l.sourceRoot||"").concat(e," */")}));return[o].concat(a).concat([s]).join("\n")}return[o].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(i,"}"):i})).join("")},t.i=function(e,i,n){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(n)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(r[l]=!0)}for(var s=0;s<e.length;s++){var a=[].concat(e[s]);n&&r[a[0]]||(i&&(a[2]?a[2]="".concat(i," and ").concat(a[2]):a[2]=i),t.push(a))}},t}},401:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i(253),r=i.n(n)()(!1);r.push([e.id,'.drop-shadow { \r\n  border-radius: var(--semi-border-radius-medium);\r\n  border: 2px dashed var(--semi-color-primary);\r\n  background-color: rgba(255, 255, 255, .1);\r\n  color: var(--semi-color-primary-hover);\r\n  /* display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 100%;\r\n  height: 100%;\r\n  position: absolute;\r\n  z-index: 999;\r\n  left: 0;\r\n  top: 0;\r\n  font-size: 12px;\r\n  opacity: .85; */\r\n}\r\n\r\n.full-shadow {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 100%;\r\n  height: 100%;\r\n  position: absolute;\r\n  z-index: 999;\r\n  left: 0;\r\n  top: 0;\r\n  font-size: 12px;\r\n  opacity: .85;\r\n}\r\n\r\n.full-shadow .drop-tag {\r\n  position: absolute;\r\n  background-color: var(--semi-color-primary-hover);\r\n  color: var(--semi-color-primary-light-default);\r\n  border-radius: 0 0 0 3px;\r\n  right: 0;\r\n  top: 0;\r\n  padding: 5px;\r\n}\r\n\r\n/* 默认光标 */\r\n.cursor-default {\r\n  cursor: default;\r\n}\r\n\r\n/* 指针光标 */\r\n.cursor-pointer {\r\ncursor: pointer;\r\n}\r\n\r\n/* 文本光标 */\r\n.cursor-text {\r\ncursor: text;\r\n}\r\n\r\n/* 等待光标 */\r\n.cursor-wait {\r\ncursor: wait;\r\n}\r\n\r\n/* 帮助光标 */\r\n.cursor-help {\r\ncursor: help;\r\n}\r\n\r\n/* 移动光标 */\r\n.cursor-move {\r\ncursor: move;\r\n}\r\n\r\n/* 禁止光标 */\r\n.cursor-not-allowed {\r\ncursor: not-allowed;\r\n}\r\n\r\n/* 缩放光标 */\r\n.cursor-zoom-in {\r\ncursor: zoom-in;\r\n}\r\n\r\n.cursor-zoom-out {\r\ncursor: zoom-out;\r\n}\r\n\r\n/* 十字光标 */\r\n.cursor-crosshair {\r\ncursor: crosshair;\r\n}\r\n\r\n/* Block */\r\n.vis-hidden {\r\n  visibility:hidden;\r\n}\r\n.vis-visible {\r\n  visibility:visible;\r\n}\r\n.vis-visible-im {\r\n  visibility:visible!important;\r\n}\r\n.vis-hidden-im {\r\n  visibility:hidden!important;\r\n}\r\n\r\n.opacity-0 {\r\n  opacity: 0;\r\n}\r\n\r\n.opacity-0-im {\r\n  opacity: 0!important;\r\n}\r\n\r\n.ridge-is-hoverable .hidden-to-visible {\r\n  visibility: hidden;\r\n}\r\n\r\n.ridge-is-hoverable:HOVER .hidden-to-visible {\r\n  visibility: visible;\r\n}\r\n\r\n\r\n\r\n[class~="parent"] span {\r\n  background-color: yellow;\r\n}\r\n\r\n.opacity-1 {\r\n  opacity: 1;\r\n}\r\n\r\n.opacity-1-im {\r\n  opacity: 1!important;\r\n}\r\n\r\n\r\n.horizontal-tb {\r\n  writing-mode: horizontal-tb;\r\n}\r\n.vertical-rl {\r\n  writing-mode: vertical-rl;\r\n}\r\n.vertical-lr {\r\n  writing-mode: vertical-lr;\r\n}',""]);const o=r},406:(e,t,i)=>{var n=i(591),r=i(808);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.id,r,""]]);n(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},538:(e,t,i)=>{var n=i(591),r=i(216);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.id,r,""]]);n(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},585:e=>{e.exports=function(){return this.createDebug}()},591:(e,t,i)=>{"use strict";var n,r=function(){var e={};return function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}e[t]=i}return e[t]}}(),o=[];function l(e){for(var t=-1,i=0;i<o.length;i++)if(o[i].identifier===e){t=i;break}return t}function s(e,t){for(var i={},n=[],r=0;r<e.length;r++){var s=e[r],a=t.base?s[0]+t.base:s[0],d=i[a]||0,c="".concat(a," ").concat(d);i[a]=d+1;var h=l(c),p={css:s[1],media:s[2],sourceMap:s[3]};-1!==h?(o[h].references++,o[h].updater(p)):o.push({identifier:c,updater:m(p,t),references:1}),n.push(c)}return n}function a(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var o=i.nc;o&&(n.nonce=o)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var l=r(e.insert||"head");if(!l)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");l.appendChild(t)}return t}var d,c=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function h(e,t,i,n){var r=i?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=c(t,r);else{var o=document.createTextNode(r),l=e.childNodes;l[t]&&e.removeChild(l[t]),l.length?e.insertBefore(o,l[t]):e.appendChild(o)}}function p(e,t,i){var n=i.css,r=i.media,o=i.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var u=null,g=0;function m(e,t){var i,n,r;if(t.singleton){var o=g++;i=u||(u=a(t)),n=h.bind(null,i,o,!1),r=h.bind(null,i,o,!0)}else i=a(t),n=p.bind(null,i,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(i)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var i=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<i.length;n++){var r=l(i[n]);o[r].references--}for(var a=s(e,t),d=0;d<i.length;d++){var c=l(i[d]);0===o[c].references&&(o[c].updater(),o.splice(c,1))}i=a}}}},677:e=>{e.exports=function(){return this.React}()},688:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i(253),r=i.n(n)()(!1);r.push([e.id,".switch-container {\r\n    width: 100%;\r\n    height: 100%;\r\n    position: relative;\r\n    overflow: hidden;\r\n    box-sizing: border-box;\r\n}\r\n\r\n\r\n.switch-container .content-wrapper {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0\r\n}\r\n\r\n.switch-container .content-wrapper .state-content {\r\n    position: absolute;\r\n}",""]);const o=r},699:(e,t,i)=>{var n=i(591),r=i(401);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.id,r,""]]);n(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},808:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i(253),r=i.n(n)()(!1);r.push([e.id,".m-page-container {\r\n    width: 100%;\r\n    height: 100%;\r\n    position: relative;\r\n    overflow: hidden;\r\n    box-sizing: border-box;\r\n}\r\n\r\n.m-page-container .sub-page {\r\n    width: 100%;    \r\n    height: 100%;\r\n    position: absolute;\r\n    overflow: hidden;\r\n    left: 0;\r\n    top: 0\r\n}\r\n",""]);const o=r},983:e=>{e.exports=function(){return this.ReactDOM}()}},n={};function r(e){var t=n[e];if(void 0!==t)return t.exports;var o=n[e]={id:e,exports:{}};return i[e](o,o.exports,r),o.exports}r.m=i,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,i)=>(r.f[i](e,t),t)),[])),r.u=e=>e+".ridge.dist.js",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="ridge-container:",r.l=(i,n,o,l)=>{if(e[i])e[i].push(n);else{var s,a;if(void 0!==o)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var h=d[c];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==t+o){s=h;break}}s||(a=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.setAttribute("data-webpack",t+o),s.src=i),e[i]=[n];var p=(t,n)=>{s.onerror=s.onload=null,clearTimeout(u);var r=e[i];if(delete e[i],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((e=>e(n))),t)return t(n)},u=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),a&&document.head.appendChild(s)}},r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var n=i.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=i[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),(()=>{var e={792:0};r.f.j=(t,i)=>{var n=r.o(e,t)?e[t]:void 0;if(0!==n)if(n)i.push(n[2]);else{var o=new Promise(((i,r)=>n=e[t]=[i,r]));i.push(n[2]=o);var l=r.p+r.u(t),s=new Error;r.l(l,(i=>{if(r.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var o=i&&("load"===i.type?"missing":i.type),l=i&&i.target&&i.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+l+")",s.name="ChunkLoadError",s.type=o,s.request=l,n[1](s)}}),"chunk-"+t,t)}};var t=(t,i)=>{var n,o,[l,s,a]=i,d=0;if(l.some((t=>0!==e[t]))){for(n in s)r.o(s,n)&&(r.m[n]=s[n]);a&&a(r)}for(t&&t(i);d<l.length;d++)o=l[d],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0},i=globalThis.webpackChunkridge_container=globalThis.webpackChunkridge_container||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),r.nc=void 0;var o={};(()=>{"use strict";r.r(o),r.d(o,{composite:()=>e,fixed:()=>p,flex:()=>m,flow:()=>f,html:()=>y,layers:()=>b,list:()=>E,pages:()=>S,relative:()=>C,stack:()=>k});const e={name:"composite",component:class{constructor(e){this.props=e}getRidge(){return window.ridge??this.props.ridge}async mount(e){this.el=e,this.containerEl=document.createElement("div"),e.appendChild(this.containerEl),this.updateContainerStyle(),this.loadMountComposite()}async loadMountComposite(){const e=this.getRidge(),{packageName:t,pagePath:i,__composite:n,...r}=this.props;if(this.containerEl.composite&&this.containerEl.composite.unmount(),i){const o=await e.createComposite(t||n.packageName,i,r);o&&(this.containerEl.composite=o,this.el.composite=o,await o.initialize(),await o.mount(this.containerEl))}}updateContainerStyle(){const{classList:e}=this.props;this.containerEl.className=[...e||[],"ridge-composite"].join(" ")}update(e){this.props.packageName!==e.packageName||this.props.pagePath!==e.pagePath?(Object.assign(this.props,e),this.loadMountComposite()):this.el.composite&&(Object.assign(this.props,e),this.el.composite.setProperties(this.props)),this.updateContainerStyle()}destroy(){this.containerEl&&(this.containerEl.composite&&this.containerEl.composite.unmount(),this.el.removeChild(this.containerEl))}},title:"子页面",icon:"icons/page.svg",type:"vanilla",width:520,height:400,props:[{name:"packageName",label:"应用名称",type:"string",connect:!0,value:""},{name:"pagePath",label:"页面路径",type:"string",connect:!0,value:""},{name:"classList",label:"样式",type:"style",value:[]}],events:[]};var t=r(677),i=r.n(t),n=r(983);const l=(e="boolean",t="布尔",i=!0,n=!0)=>({name:e,label:t,type:"boolean",width:"50%",connect:n,value:i}),s=(e="number",t="数字",i=0,n=!0)=>({name:e,label:t,type:"number",width:"50%",connect:n,value:i}),a=(e="classList",t="样式")=>({name:e,label:t,type:"style",connect:!0,value:[]}),d=e=>{if(Array.isArray(e))return e.map((e=>"string"==typeof e?{label:e,value:e}:e));if("string"==typeof e){const t=e.split(/[, ;]/);return d(t)}},c=(e="radiogroup",t="切换",i=[{label:"大",value:"btn-lg"},{label:"正常",value:"btn-normal"},{label:"小",value:"btn-sm"}],n,r=!0)=>{var o;return{name:e,label:t,type:"string",control:"radiogroup",optionList:d(i),connect:r,value:null==n?null===(o=i[0])||void 0===o?void 0:o.value:n}},h={name:"children",hidden:!0,type:"children"},p={name:"fixed-container",component:({left:e,right:t,top:r,bottom:o,align:l,width:s,height:a,visible:d,content:c,__isEdit:h})=>{const p={position:"fixed",zIndex:99999};return l.indexOf("left")>-1&&(p.left=e+"px"),l.indexOf("right")>-1&&(p.right=t+"px"),l.indexOf("top")>-1&&(p.top=r+"px"),l.indexOf("bottom")>-1&&(p.bottom=o+"px"),-1!==l.indexOf("left")&&-1!==l.indexOf("right")||(p.width=s+"px"),-1!==l.indexOf("bottom")&&-1!==l.indexOf("top")||(p.height=a+"px"),d||(p.display="none"),i().createElement(i().Fragment,null,h?i().createElement("div",{style:{width:"100%",height:"100%"}},c&&c()):(0,n.createPortal)(i().createElement("div",{style:p},c&&c()),document.body))},title:"固定容器",type:"react",icon:"icons/fixed.svg",props:[((e="slot",t="插槽")=>({name:e,label:t,type:"slot"}))("content","内容"),{label:"位置",name:"align",type:"array",control:"select",multiple:!0,options:[{label:"靠左",value:"left"},{label:"靠右",value:"right"},{label:"靠上",value:"top"},{label:"靠下",value:"bottom"}],value:["left","top"]},{name:"left",label:"距左",type:"number",hidden:e=>{var t,i;return-1===(null===(t=e.props)||void 0===t||null===(i=t.align)||void 0===i?void 0:i.indexOf("left"))}},{name:"top",label:"距上",type:"number",hidden:e=>{var t,i;return-1===(null===(t=e.props)||void 0===t||null===(i=t.align)||void 0===i?void 0:i.indexOf("top"))}},{name:"right",label:"距右",type:"number",hidden:e=>{var t,i;return-1===(null===(t=e.props)||void 0===t||null===(i=t.align)||void 0===i?void 0:i.indexOf("right"))}},{name:"bottom",label:"距下",type:"number",hidden:e=>{var t,i;return-1===(null===(t=e.props)||void 0===t||null===(i=t.align)||void 0===i?void 0:i.indexOf("bottom"))}},a()],portalled:!0,width:240,height:240};r(699);class u{constructor(e){this.props=e,this.forceUpdateChildren=!0}mounted(){}destroy(){if(Array.isArray(this.children))for(const e of this.children)e.unmount();this.el.innerHTML=""}onChildRemoved(){}onChildAppended(){}childListUpdated(){}getContainerStyle(){}getChildStyle(e){}async mountChildNode(e,t){await e.mount(t)}async mount(e){if(this.el=e,this.el.style["touch-action"]="none",this.isRuntime=!this.props.__isEdit,this.isEditor=this.props.__isEdit,this.containerEl=document.createElement("div"),this.el.appendChild(this.containerEl),this.updateContainerStyle(),this.children=this.props.children,this.children){const e=[];for(const t of this.children)try{const i=document.createElement("div");(this.getChildWrapper?this.getChildWrapper():this.containerEl).appendChild(i),this.updateChildStyle(t,i),e.push(this.mountChildNode(t,i))}catch(e){}await Promise.allSettled(e)}await this.mounted()}unmountChildren(){for(const e of this.children)e.unmount()}checkNodeOrder(e){return-1}appendChild(e,{x:t,y:i},n){const r=this.containerEl.querySelector('[shadow-for="'+e.getId()+'"]'),o=e.el;r?this.containerEl.replaceChild(o,r):(this.el.querySelector(":scope > .drop-shadow")&&this.el.removeChild(this.el.querySelector(":scope > .drop-shadow")),n>-1&&this.containerEl.childNodes[n]?this.containerEl.insertBefore(o,this.containerEl.childNodes[n]):this.containerEl.appendChild(o)),this.onChildAppended(e,{x:t,y:i}),this.updateChildStyle(e)}updateChildList(e){for(const t of e)this.containerEl.appendChild(t.el),this.updateChildStyle(t);this.children=e,this.childListUpdated()}isDroppable(){return!0}onDragOver(e){let t=null;if(e&&(t=this.containerEl.querySelector('[shadow-for="'+e.getId()+'"]')),t&&(this.isIntersect(e.el.getBoundingClientRect(),t.getBoundingClientRect())||(this.containerEl.removeChild(t),t=null)),t||(t=this.el.querySelector(":scope > .drop-shadow")),null==t){const e=document.createElement("div");e.classList.add("drop-shadow"),e.classList.add("full-shadow"),e.innerHTML="可以放入容器内",this.el.appendChild(e),this.el.style.position||(this.el.style.position="relative")}}isIntersect(e,t){return!(e.x+e.width<t.x||e.x>t.x+t.width||e.y+e.height<t.y||e.y>t.y+t.height)}onDragOut(e){this.el.querySelector(":scope > .drop-shadow")&&this.el.removeChild(this.el.querySelector(":scope > .drop-shadow")),this.containerEl.querySelector(":scope > .drop-shadow")&&this.containerEl.removeChild(this.containerEl.querySelector(":scope > .drop-shadow")),"relative"===this.el.style.position&&(this.el.style.position="")}removeChild(e){e.el.parentElement===this.containerEl&&this.containerEl.removeChild(e.el),this.onChildRemoved(e)}updateChildStyle(e,t){const i=t||e.el;if(i){const t=Object.assign({},this.getChildStyle(e,i));Object.assign(i.style,t)}}getChildren(){return this.children}getChildElements(){return Array.from(this.containerEl.childNodes).filter((e=>e.ridgeNode))}updateContainerStyle(){Object.assign(this.containerEl.style,this.getContainerStyle()),this.containerEl.className=(this.props.classList||[]).join(" "),!0===this.props.hoverable?this.el.classList.add("ridge-is-hoverable"):this.el.classList.remove("ridge-is-hoverable")}update(e){if(Object.assign(this.props,e),this.isEditor&&this.updateContainerStyle(),this.forceUpdateChildren)for(const e of this.children)e.forceUpdate();this.updated&&this.updated()}getResetStyle(){return{position:"",top:"",left:"",transform:"",width:"",height:""}}}const g=e=>{if(null==e)return e;const t=String(e).trim();return/^(auto|inherit|initial|unset|0|calc|min|max|clamp)/.test(t)||/[^\d.]\s*\d/.test(t)?t:`${parseFloat(t)||0}px`},m={name:"flex-container",component:class extends u{mounted(){this._doOnClick=this.doOnClick.bind(this),this._doOnMouseDown=this.doOnMouseDown.bind(this),this.el&&(this.el.addEventListener("click",this._doOnClick),this.el.onpointerdown=this._doOnMouseDown)}destroy(){this.el&&(this.el.removeEventListener("click",this._doOnClick),this.el.removeEventListener("mousedown",this._doOnMouseDown))}doOnMouseDown(){this.props.onMouseDown&&this.props.onMouseDown()}doOnClick(){this.props.onClick&&this.props.onClick()}getContainerStyle(){const{direction:e="row",alignItems:t="stretch",gap:i=0,padding:n,flexWrap:r,justify:o="flex-start",rectStyle:l,__isEdit:s}=this.props,a={display:"flex",flexDirection:e,width:"100%",height:"100%",flexWrap:r?"wrap":"no-wrap",justifyContent:o,alignItems:t,boxSizing:"border-box",padding:n+"px",gap:i+"px"};if(Array.isArray(this.props.children))for(const e of this.props.children)!0===e.config.style.autoSize&&(a.overflow="auto"),e.config.style.autoWidth&&(a.overflowX="auto"),e.config.style.autoHeight&&(a.overflowY="auto");return Object.assign(a,l),a}checkNodeOrder(e){const t=e.x+e.width/2,i=e.y+e.height/2,n=this.containerEl.childNodes,{direction:r="row"}=this.props;if("row"===r)for(let e=0;e<n.length;e++){const i=n[e].getBoundingClientRect();if(i.x+i.width/2>t)return e}else if("column"===r)for(let e=0;e<n.length;e++){const t=n[e].getBoundingClientRect();if(t.y+t.height/2>i)return e}return-1}childSelected(e){const t=e.config.style;t.flex||t.autoSize||("row"===this.props.direction&&0!==e.el.offsetWidth?(e.el.style.width=e.el.offsetWidth+"px",e.config.style.width=e.el.offsetWidth):0!==e.el.offsetHeight&&(e.el.style.height=e.el.offsetHeight+"px",e.config.style.height=e.el.offsetHeight))}getChildStyle(e,t){const i=this.getResetStyle(),n=Object.assign({},e.config.style,e.style);return n.visible?i.display="":i.display="none",n.hoverVisible&&t.classList.add("hidden-to-visible"),n.alignSelfStretch?i.alignSelf="stretch":"stretch"!==this.props.alignItems&&("row"===this.props.direction?i.height=n.height?`min(100%, ${n.height}px)`:"":"column"===this.props.direction&&(i.width=n.width?`min(100%, ${n.width}px)`:"")),n.flex?(i.flex=n.flex,"row"===this.props.direction?i.overflowX="hidden":i.overflowY="hidden",i.flexShrink="0"):(i.flex="none",Array.isArray(this.props.children)&&1===this.props.children.length?"row"===this.props.direction?i.width=n.width?`min(100%, ${n.width}px)`:"":i.height=n.height?`min(100%, ${n.height}px)`:"":"row"===this.props.direction?i.width=g(n.width):i.height=g(n.height)),n.autoWidth&&(delete i.width,"row"===this.props.direction&&(i.flexShrink="0")),n.autoHeight&&(delete i.height,"column"===this.props.direction&&(i.flexShrink="0")),i}},title:"弹性容器",type:"vanilla",icon:"icons/flex.svg",props:[c("direction","排列方向",[{label:"横向",value:"row"},{label:"纵向",value:"column"}],"row"),{name:"justify",label:"排列对齐",type:"string",control:"radiogroup",optionList:[{label:"开始",value:"flex-start"},{label:"正中",value:"center"},{label:"结束",value:"flex-end"},{label:"两边",value:"space-between"},{label:"均匀",value:"space-evenly"}],value:"flex-start"},{name:"alignItems",label:"交叉对齐",type:"string",control:"radiogroup",optionList:[{label:"起点",value:"flex-start"},{label:"正中",value:"center"},{label:"填充",value:"stretch"},{label:"终点",value:"flex-end"}],value:"flex-start"},l("flexWrap","换行",!1),{name:"children",hidden:!0,type:"children"},s("gap","间隔",8),s("padding","内间距",8),l("hoverable","鼠标上浮",!1),((e="json",t="对象",i={},n=!0)=>({name:e,label:t,value:i,connect:n,type:"object"}))("rectStyle","CSS样式",{},!0),a()],childProps:[{label:"宽度",width:"50%",control:"number",field:"style.width",fieldEx:"styleEx.width"},{label:"高度",width:"50%",control:"number",field:"style.height",fieldEx:"styleEx.height"},{label:"自动宽",width:"50%",control:"boolean",field:"style.autoWidth"},{label:"自动高",width:"50%",control:"boolean",field:"style.autoHeight"},{field:"style.flex",label:"弹性",type:"string",width:"50%"},{label:"交叉填充",width:"50%",control:"boolean",field:"style.alignSelfStretch"},{field:"style.visible",label:"占位",type:"boolean",fieldEx:"styleEx.visible",width:"50%"},{field:"style.hoverVisible",label:"上浮可见",type:"boolean",width:"50%"}],events:[{label:"单击",name:"onClick"},{name:"onMouseDown",label:"鼠标按下"}],fullScreenable:!0,width:360,height:240},f={name:"flow-container",component:class extends u{checkNodeOrder(e){const t=e.x+e.width/2,i=e.y+e.height/2,n=this.containerEl.childNodes;let r=-1;for(let e=n.length-1;e>=0;e--){const o=n[e].getBoundingClientRect(),l=o.x+o.width/2,s=o.y+o.height/2;l>t&&s>i&&(r=e)}return r}getContainerStyle(){return{width:"100%"}}getChildStyle(e){const t=this.getResetStyle();return e.config.style.block?(t.display="block",t.width="100%",t.height=e.config.style.height+"px"):(t.display="inline-block",t.width=e.config.style.width+"px",t.height=e.config.style.height+"px"),t}},title:"流式容器",type:"vanilla",order:3,icon:"icons/wrap.svg",props:[h,a()],childProps:[{field:"style.width",label:"宽度",type:"number",width:"50%"},{field:"style.height",label:"高度",type:"number",width:"50%"},{field:"style.block",label:"块级",type:"boolean",width:"50%"}],width:800,height:600},y={name:"html",component:class{constructor(e){this.props=e}mount(e){this.el=e,this.render()}update(e){this.props=e,this.render()}render(){const{html:e,classNames:t=[]}=this.props;this.el.innerHTML=e??"",this.el.className=t.join(" ")}},icon:"icons/html.svg",title:"网页代码",type:"vanilla",order:20,width:260,height:160,props:[{name:"html",type:"string",label:"HTML",connect:!0,value:"<div>HTML</div>"},{name:"isCenter",type:"boolean",label:"正中",value:!0},{name:"classNames",label:"样式",type:"style",value:[]}]};r(194);const v={prevBack:{prev:{shadow:!0,translate:[0,0,-400]},next:{translate:["100%",0,0]}},slideSpace:{prev:{shadow:!0,translate:["-120%",0,-500]},next:{shadow:!0,translate:["120%",0,-500]}},preStep:{prev:{shadow:!0,translate:["-20%",0,-1]},next:{translate:["100%",0,0]}},slideCurve:{prev:{shadow:!0,origin:"left center",translate:["-5%",0,-200],rotate:[0,100,0]},next:{origin:"right center",translate:["5%",0,-200],rotate:[0,-100,0]}}},b={name:"switch-container",component:class extends u{isSwiper(){const{swipeable:e,swipeEffect:t}=this.props;return(e||t)&&this.isRuntime}getChildWrapper(){return this.isSwiper()?(this.swiperEl||(this.swiperEl=document.createElement("div"),this.containerEl.appendChild(this.swiperEl),this.swiperEl.classList.add("swiper-wrapper")),this.swiperEl):this.containerEl}async mounted(){const{__composite:e,onChange:t,swipeEffect:i,swipeable:n}=this.props;if(this.containerEl.classList.add("switch-container"),this.forceUpdateChildren=!0,this.isSwiper()){this.containerEl.parentElement.style.overflow="hidden",await e.loadScript("/swiper@11/swiper-bundle.min.css"),await e.loadScript("/swiper@11/swiper-bundle.min.js");const{Swiper:r}=window;r||console.error("swiper@11 not loaded");const o=this.getCurrentSlideIndex(),l={};l.allowTouchMove=!!n,i&&(v[i]?(l.effect="creative",l.creativeEffect=v[i]):l.effect=i),this.swiper=new r(this.containerEl,{initialSlide:o,edgeSwipeDetection:!0,...l}),this.swiper.on("slideChange",(e=>{const i=e.realIndex,n=this.getChildWrapper().children[i].getAttribute("ridge-title");t&&t(n)}))}await this.toggleState()}getCurrentSlideIndex(e){const{current:t}=this.props,i=this.getChildWrapper().children;let n=-1;const r=null==e?t:e;for(let e=0;e<i.length;e++)if(r===i[e].getAttribute("ridge-title")||parseInt(r)===e||0===e&&!0===r||1===e&&!1===r||this.isEditor&&0===e&&null==r){n=e;break}return-1===n&&(n=0),n}async toggleState(e){const t=this.getChildWrapper().children,i=this.getCurrentSlideIndex(e);if(i>-1)if(this.isSwiper())this.swiper.slideTo(i);else for(let e=0;e<t.length;e++)e===i?(t[e].setAttribute("toggle-on",!0),t[e].style.display="","mounted"!==t[e].getAttribute("ridge-mount")&&t[e].ridgeNode.mount(t[e])):(t[e].removeAttribute("toggle-on"),t[e].style.display="none")}async mountChildNode(e,t){const{preload:i}=this.props;this.isSwiper()&&t.classList.add("swiper-slide"),i||this.isEditor?await e.mount(t):(t.setAttribute("ridge-title",e.config.title),t.ridgeNode=e)}childSelected(e){this.toggleState(e.getConfig().title)}onChildRemoved(){this.toggleState()}onChildAppended(e){const t=this.getChildElements();this.toggleState(t.indexOf(e.el))}handleDynamicPages(){const{dynamicPages:e,__composite:t}=this.props;if(Array.isArray(e)){const i=e.filter((e=>null!=e.key&&null!=e.packageName)),n=this.getChildWrapper(),r=[];Array.from(n.children).forEach(((e,t)=>{e.getAttribute("slide-key")&&null==i.find((t=>t.key===e.getAttribute("slide-key")))&&r.push(t)})),this.isSwiper()&&this.swiper.removeSlide(r);for(let e=0;e<i.length;e++){const r=this.children.length+e,o=i[e];let l=!1;if(n.children[r]&&n.children[r].getAttribute("slide-key")===o.key||(l=!0),l){const e=document.createElement("div");e.setAttribute("slide-key",o.key),this.isSwiper()?(e.classList.add("swiper-slide"),e.style.overflow="hidden",this.swiper.addSlide(r,[e])):n.children[r]?n.insertBefore(e,n.children[r]):n.appendChild(e);const i=t.createElement({id:"dp-"+Math.random(),path:"ridge-container/composite",props:o,title:o.title});this.mountChildNode(i,e)}}for(;n.children.length>i.length+this.children.length;)this.swiper.removeSlide(n.children.length-1)}}async updated(){this.toggleState(),this.containerEl.classList.add("switch-container")}getChildStyle(e){const t=this.getResetStyle();if(!this.isSwiper())return t.width="100%",t.height="100%",t.position="absolute",t.left=0,t.top=0,t}onStyleUpdated(){this.containerEl.style.position="relative"}},title:"切换容器",type:"vanilla",icon:"icons/switch.svg",props:[{name:"current",label:"当前内容",connect:!0,input:!0,type:"string",value:""},l("preload","预加载",!0),l("swipeable","滑动切换",!1),((e="select",t="选择",i=[{label:"大",value:"btn-lg"},{label:"正常",value:"btn-normal"}],n,r=!0,o=!0)=>{let l=[];return Array.isArray(i)&&(l=i.map((e=>"string"==typeof e?{label:e,value:e}:e))),{name:e,label:t,type:"string",control:"select",optionList:l,required:o,connect:r,value:n}})("swipeEffect","切换效果",[{label:"平移",value:"slide"},{label:"淡入",value:"fade"},{label:"卡片",value:"cards"},{label:"翻转",value:"flip"},{label:"原地缩小",value:"prevBack"},{label:"间距",value:"slideSpace"},{label:"缓退",value:"preStep"},{label:"折叠",value:"slideCurve"}]),a(),h],events:[{label:"切换",name:"onChange"}],fullScreenable:!0,width:540,height:360};var w=r(585);const x=r.n(w)()("container:list"),E={name:"list-container",component:class{constructor(e){this.props=e}mount(e){this.el=e;const{overflowAuto:t}=this.props;t?this.scrollerEl||(this.scrollerEl=document.createElement("div"),this.containerEl=document.createElement("div"),this.scrollerEl.style.width="100%",this.scrollerEl.style.height="100%",e.appendChild(this.scrollerEl),this.scrollerEl.appendChild(this.containerEl)):this.containerEl||(this.containerEl=document.createElement("div"),e.appendChild(this.containerEl)),this.renderUpdate(),this.updateSortable()}updateChildStyle(){this.props.template&&this.props.template.el&&(this.props.template.el.style.width=this.props.template.config.style.width+"px",this.props.template.el.style.height=this.props.template.config.style.height+"px")}update(e){this.props=e,this.renderUpdate()}renderUpdate(){const{classNames:e}=this.props;Object.assign(this.containerEl.style,this.getContainerStyle()),this.props.__isEdit?this.renderUpdateSlots():this.renderListItems(),this.scrollerEl&&(this.scrollerEl.className=e.join(" "),Object.assign(this.scrollerEl.style,this.getScrollerStyle()))}renderUpdateSlots(e){if(e)e.template!==this.props.template&&this.containerEl.append(e.template.el);else if(this.props.template)if(null==this.props.template.el){const e=document.createElement("div");this.containerEl.append(e),this.props.template.mount(e)}else this.containerEl.append(this.props.template.el)}getScrollerStyle(){const{direction:e="y"}=this.props;return"y"===e?{boxSizing:"border-box",overflow:"hidden auto"}:{boxSizing:"border-box",overflow:"auto hidden"}}getContainerStyle(){const{gap:e,direction:t="y"}=this.props;return{gap:e+"px",display:"flex",flexDirection:"y"===t?"row":"column",padding:0,flexWrap:"wrap"}}async renderListItems(){if(!this.props.template)return;const{dataSource:e,gap:t,horizontalDivide:i,verticalDivide:n,template:r,fixedHeight:o,fixedWidth:l,onItemClick:s,selected:a,itemClassNames:d=[],selectedClassNames:c=[]}=this.props,h=this;if(x("renderListItems",e),await r.load(!0),null==this.items&&(this.items=[]),Array.isArray(e)){for(let r=0;r<e.length;r++){const d=e[r];if(null==this.items[r]){const c=document.createElement("div");c.classList.add("ridge-is-selectable");const p=this.props.template.clone();p.setScopedData({i:r,list:e,item:d,selected:a}),this.items[r]=p;const u={position:"",top:"",left:"",transform:"",width:"auto",height:"auto"};u.height=o?p.config.style.height+"px":`calc((100% - ${t*(n-1)}px) / ${n})`,u.width=l?p.config.style.width+"px":`calc((100% - ${t*(i-1)}px) / ${i})`,Object.assign(c.style,u),this.containerEl.appendChild(c),c.onclick=()=>{s&&s({i:r,item:h.props.dataSource[r],liet:h.props.dataSource,selected:a})},null!=d?p.mount(c):p.el=c}else this.items[r].setScopedData({i:r,list:e,item:d,selected:a}),null==d?this.items[r].unmount():this.items[r].getIsMounted()?this.items[r].forceUpdate():this.items[r].mount()}for(x("renderListItems Finsished",e);this.items.length>e.length;){const t=this.items.pop();x("remove ",t,e);const i=t.el;t.unmount(),i&&i.parentElement===this.containerEl&&this.containerEl.removeChild(i)}}else if(this.items.length){for(const e of this.items){const t=e.el;e.unmount(),t&&t.parentElement===this.containerEl&&this.containerEl.removeChild(t)}this.items=[]}for(let e=0;e<this.containerEl.children.length;e++){const t=Array.from(this.containerEl.children[e].classList);if(null!=a&&(Array.isArray(a)&&a.includes(e)||e===a)){this.containerEl.children[e].className=Array.from(new Set([...t,...d,...c])).join(" ");const i=new CustomEvent("selected",{bubbles:!0});this.containerEl.children[e].dispatchEvent(i)}else this.containerEl.children[e].className=Array.from(new Set([...t.filter((e=>!c.includes(e))),...d])).join(" "),this.containerEl.children[e].dispatchEvent(new CustomEvent("unselected",{bubbles:!0}))}}async updateSortable(){const{sortable:e,__composite:t}=this.props;e&&(await t.loader.loadScript("sortablejs/Sortable.min.js"),this.sortable=window.Sortable.create(this.containerEl))}getChildStyle(e){const t=this.getResetStyle(),i=e.config.style;return t.width=i.width?i.width+"px":"",t.height=i.height?i.height+"px":"",t}},title:"列表容器",icon:"icons/list.svg",type:"vanilla",props:[{name:"dataSource",label:"数据",type:"array",connect:!0,control:"json",value:[]},{name:"selected",label:"选中项",type:"array",connect:!0,control:"json",value:[]},{name:"template",label:"单项模板",resizable:!0,type:"slot"},l("overflowAuto","超出滚动",!0,!1),c("direction","方向",[{label:"横向",value:"x"},{label:"纵向",value:"y"}],"y"),{name:"fixedHeight",label:"固定高度",type:"boolean",value:!0},{name:"fixedWidth",label:"固定宽度",type:"boolean",value:!0},{name:"horizontalDivide",label:"水平等分",hidden:e=>!0===e.fixedWidth,type:"number",value:3},{name:"verticalDivide",label:"垂直等分",hidden:e=>!0===e.fixedHeight,type:"number",value:3},l("sortable","拖拽排序",!1,!1),s("gap","间隔",4),{name:"classNames",label:"整体样式",type:"style",value:[]}],childProps:[{label:"W",width:"50%",control:"number",field:"style.width",fieldEx:"styleEx.width"},{label:"H",width:"50%",control:"number",field:"style.height",fieldEx:"styleEx.height"}],events:[{name:"onItemClick",label:"单项点击"}],width:420,height:360};r(406);const S={name:"page-switch",component:class{constructor(e){this.props=e}mount(e){this.el=e,this.containerEl=document.createElement("div"),e.appendChild(this.containerEl),this.updateContainerStyle(),this.renderUpdate()}update(e){this.props=e,this.renderUpdate(),this.updateContainerStyle()}renderUpdate(){const{pages:e=[],currentPageId:t=""}=this.props;for(const t of e)t.id&&(this.containerEl.querySelector(`div.sub-page[page="${t.id}"]`)||this.appendPage(t));const i=this.containerEl.querySelectorAll("div.sub-page");for(const n of i){const i=n.getAttribute("page");e.find((e=>e.id===i))||this.containerEl.removeChild(n),n.style.visibility=t===i?"visible":"hidden"}}appendPage(e){const{__composite:t}=this.props,{packageName:i,pagePath:n,...r}=e;if(!i||!n)return void console.warn("多页切换容器 页面项无效：",e);const o=document.createElement("div");if(o.setAttribute("page",e.id),o.className="sub-page",this.containerEl.appendChild(o),n){const e=window.ridge.createComposite(i||t.packageName,n,r);e&&e.initialize().then((t=>{t&&e.mount(o)}))}}updateContainerStyle(){const{classList:e}=this.props;this.containerEl.className="m-page-container "+e.join(" ")}},title:"多页切换",type:"vanilla",icon:"icons/pages.svg",props:[{name:"currentPageId",label:"当前内容",connect:!0,input:!0,type:"string",value:""},{name:"pages",label:"页面列表",connect:!0,type:"array",value:[]},a()],events:[],fullScreenable:!0,width:540,height:360},C={name:"relative-container",component:class extends u{getContainerStyle(){const{overflow:e}=this.props,t={width:"100%",height:"100%",boxSizing:"border-box",position:"relative"};return e&&(t.overflow="hidden"),t}onChildAppended(e,{x:t,y:i}){e.updateConfig({style:{x:t,y:i,width:e.config.style.width,height:e.config.style.height}},!0)}onChildRemoved(e){}getChildStyle(e){const{width:t,height:i}=this.props,n=this.getResetStyle(),r=e.config.style;return this.isRuntime?(n.position="absolute",r.align?(r.align.indexOf("left")>-1&&(n.left=r.x+"px"),r.align.indexOf("right")>-1&&t&&(n.right=t-r.x-r.width+"px"),r.align.indexOf("top")>-1&&(n.top=r.y+"px"),r.align.indexOf("bottom")>-1&&i&&(n.bottom=i-r.y-r.height+"px")):(n.position="absolute",n.top=r.y+"px",n.left=r.x+"px",n.width=r.width+"px",n.height=r.height+"px"),n.zIndex=function(e){return e&&e.parentNode?Array.from(e.parentNode.children).indexOf(e):-1}(e.el)+10):(n.position="absolute",n.top=r.y+"px",n.left=r.x+"px",n.width=r.width+"px",n.height=r.height+"px"),n}},title:"自由容器",type:"vanilla",icon:"icons/relative.svg",props:[h,l("overflow","超出隐藏",!0),a()],childProps:[{label:"距左",type:"number",field:"style.x"},{label:"距上",type:"number",field:"style.y"},{label:"宽度",type:"number",field:"style.width"},{label:"高度",type:"number",field:"style.height"},{label:"位置",field:"style.align",type:"array",control:"select",multiple:!0,options:[{label:"靠左",value:"left"},{label:"靠右",value:"right"},{label:"靠上",value:"top"},{label:"靠下",value:"bottom"}],value:["left","top"]}],fullScreenable:!0,width:540,height:360};r(538);const k={name:"stack-container",component:class extends u{getContainerStyle(){return{overflow:"hidden"}}async mounted(){this.containerEl.className=(this.props.classList||[]).join(" ")+" stack-container",this.forceUpdateChildren=!0,this.isEditor||(this.forceChildrenStyle(),this.containerEl.addEventListener("mouseenter",(()=>{this.forceChildrenStyle(!0)})),this.containerEl.addEventListener("mouseleave",(()=>{this.forceChildrenStyle(!1)})))}forceChildrenStyle(e){if(this.children)for(const t of this.children)t.el&&!0===t.style.showOnHover&&(t.el.style.display=e?"":"none")}childSelected(e){}onChildRemoved(){}onChildAppended(e){}updated(){this.containerEl.className=(this.props.classList||[]).join(" ")+" stack-container"}getChildStyle(e,t){const i=this.getResetStyle();i.width="100%",i.height="100%",i.position="absolute",i.left=0,i.top=0;const n=t.parentNode,r=Array.from(n.children);return i.zIndex=r.indexOf(t),i}onStyleUpdated(){this.containerEl.style.position="relative"}},title:"多层容器",type:"vanilla",icon:"icons/stack.svg",props:[a(),h],childProps:[{label:"悬浮展示",width:"50%",control:"boolean",field:"style.showOnHover",connect:!0}],fullScreenable:!0,width:540,height:360}})(),this["ridge-container"]=o})();