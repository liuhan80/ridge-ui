(()=>{var t={88:(t,e,s)=>{var o=s(4700);t.exports=function(t){return o(this,t).get(t)}},107:(t,e,s)=>{var o=s(2291),r=s(6403),n=s(8931),i=s(8774),a=s(7905),c=s(2237),l=s(5243);t.exports=function(t,e,s){if((t=l(t))&&(s||void 0===e))return r(t);if(!t||!(e=o(e)))return t;var h=c(t),u=c(e),d=a(h,u),p=i(h,u)+1;return n(h,d,p).join("")}},124:(t,e,s)=>{e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;e.splice(1,0,s,"color: inherit");let o=0,r=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(o++,"%c"===t&&(r=o))})),e.splice(r,0,s)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=s(7891)(e);const{formatters:o}=t.exports;o.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},155:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},482:t=>{var e="\\ud800-\\udfff",s="\\u2700-\\u27bf",o="a-z\\xdf-\\xf6\\xf8-\\xff",r="A-Z\\xc0-\\xd6\\xd8-\\xde",n="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",i="["+n+"]",a="\\d+",c="["+s+"]",l="["+o+"]",h="[^"+e+n+a+s+o+r+"]",u="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",p="["+r+"]",f="(?:"+l+"|"+h+")",m="(?:"+p+"|"+h+")",g="(?:['’](?:d|ll|m|re|s|t|ve))?",y="(?:['’](?:D|LL|M|RE|S|T|VE))?",v="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",b="[\\ufe0e\\ufe0f]?",w=b+v+"(?:\\u200d(?:"+["[^"+e+"]",u,d].join("|")+")"+b+v+")*",x="(?:"+[c,u,d].join("|")+")"+w,C=RegExp([p+"?"+l+"+"+g+"(?="+[i,p,"$"].join("|")+")",m+"+"+y+"(?="+[i,p+f,"$"].join("|")+")",p+"?"+f+"+"+g,p+"+"+y,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",a,x].join("|"),"g");t.exports=function(t){return t.match(C)||[]}},547:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},935:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var s=function(t,e){var s,o,r,n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var a=(s=i,o=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(r," */")),c=i.sources.map((function(t){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(t," */")}));return[n].concat(c).concat([a]).join("\n")}return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(s,"}"):s})).join("")},e.i=function(t,s,o){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(o)for(var n=0;n<this.length;n++){var i=this[n][0];null!=i&&(r[i]=!0)}for(var a=0;a<t.length;a++){var c=[].concat(t[a]);o&&r[c[0]]||(s&&(c[2]?c[2]="".concat(s," and ").concat(c[2]):c[2]=s),e.push(c))}},e}},1035:t=>{t.exports=function(t){return function(e){return null==t?void 0:t[e]}}},1112:(t,e,s)=>{var o=s(4497),r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(o){var s=e[t];return"__lodash_hash_undefined__"===s?void 0:s}return r.call(e,t)?e[t]:void 0}},1187:(t,e,s)=>{var o=s(7379),r=s(547);t.exports=function(t){return"symbol"==typeof t||r(t)&&"[object Symbol]"==o(t)}},1237:t=>{t.exports={externals:[{module:"react",root:"React",dist:"react@18.3.1/umd/react.production.min.js"},{module:"react-dom",dependencies:["react"],root:"ReactDOM",dist:"react-dom@18.3.1/umd/react-dom.production.min.js"},{module:"vue",root:"Vue",dist:"vue/dist/vue.min.js"},{module:"ridgejs",root:"RidgeCore"},{module:"debug",root:"createDebug"},{module:"ridgejs-editor",root:"RidgeEditor"}]}},1263:(t,e,s)=>{var o=s(7655);t.exports=function(t,e,s){return null==t?t:o(t,e,s)}},1386:(t,e,s)=>{var o=s(2393),r=s(2049),n=s(7144),i=s(5071),a=s(3964);function c(t){var e=-1,s=null==t?0:t.length;for(this.clear();++e<s;){var o=t[e];this.set(o[0],o[1])}}c.prototype.clear=o,c.prototype.delete=r,c.prototype.get=n,c.prototype.has=i,c.prototype.set=a,t.exports=c},1580:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},1950:(t,e,s)=>{var o=s(8942)["__core-js_shared__"];t.exports=o},2013:t=>{var e="\\ud800-\\udfff",s="["+e+"]",o="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",n="[^"+e+"]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",c="(?:"+o+"|"+r+")?",l="[\\ufe0e\\ufe0f]?",h=l+c+"(?:\\u200d(?:"+[n,i,a].join("|")+")"+l+c+")*",u="(?:"+[n+o+"?",o,i,a,s].join("|")+")",d=RegExp(r+"(?="+r+")|"+u+h,"g");t.exports=function(t){return t.match(d)||[]}},2049:(t,e,s)=>{var o=s(7034),r=Array.prototype.splice;t.exports=function(t){var e=this.__data__,s=o(e,t);return!(s<0||(s==e.length-1?e.pop():r.call(e,s,1),--this.size,0))}},2237:(t,e,s)=>{var o=s(2837),r=s(3417),n=s(2013);t.exports=function(t){return r(t)?n(t):o(t)}},2291:(t,e,s)=>{var o=s(5650),r=s(5111),n=s(3142),i=s(1187),a=o?o.prototype:void 0,c=a?a.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(n(e))return r(e,t)+"";if(i(e))return c?c.call(e):"";var s=e+"";return"0"==s&&1/e==-1/0?"-0":s}},2393:t=>{t.exports=function(){this.__data__=[],this.size=0}},2478:(t,e,s)=>{var o=s(4869),r=s(9454),n=s(7706);t.exports=function(t,e,s){return e==e?n(t,e,s):o(t,r,s)}},2532:(t,e,s)=>{var o=s(4715),r=function(){try{var t=o(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=r},2591:(t,e,s)=>{"use strict";var o,r=function(){var t={};return function(e){if(void 0===t[e]){var s=document.querySelector(e);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(t){s=null}t[e]=s}return t[e]}}(),n=[];function i(t){for(var e=-1,s=0;s<n.length;s++)if(n[s].identifier===t){e=s;break}return e}function a(t,e){for(var s={},o=[],r=0;r<t.length;r++){var a=t[r],c=e.base?a[0]+e.base:a[0],l=s[c]||0,h="".concat(c," ").concat(l);s[c]=l+1;var u=i(h),d={css:a[1],media:a[2],sourceMap:a[3]};-1!==u?(n[u].references++,n[u].updater(d)):n.push({identifier:h,updater:m(d,e),references:1}),o.push(h)}return o}function c(t){var e=document.createElement("style"),o=t.attributes||{};if(void 0===o.nonce){var n=s.nc;n&&(o.nonce=n)}if(Object.keys(o).forEach((function(t){e.setAttribute(t,o[t])})),"function"==typeof t.insert)t.insert(e);else{var i=r(t.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(e)}return e}var l,h=(l=[],function(t,e){return l[t]=e,l.filter(Boolean).join("\n")});function u(t,e,s,o){var r=s?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(t.styleSheet)t.styleSheet.cssText=h(e,r);else{var n=document.createTextNode(r),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(n,i[e]):t.appendChild(n)}}function d(t,e,s){var o=s.css,r=s.media,n=s.sourceMap;if(r?t.setAttribute("media",r):t.removeAttribute("media"),n&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),t.styleSheet)t.styleSheet.cssText=o;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(o))}}var p=null,f=0;function m(t,e){var s,o,r;if(e.singleton){var n=f++;s=p||(p=c(e)),o=u.bind(null,s,n,!1),r=u.bind(null,s,n,!0)}else s=c(e),o=d.bind(null,s,e),r=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(s)};return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else r()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o));var s=a(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var o=0;o<s.length;o++){var r=i(s[o]);n[r].references--}for(var c=a(t,e),l=0;l<s.length;l++){var h=i(s[l]);0===n[h].references&&(n[h].updater(),n.splice(h,1))}s=c}}}},2837:t=>{t.exports=function(t){return t.split("")}},2945:t=>{var e=/\s/;t.exports=function(t){for(var s=t.length;s--&&e.test(t.charAt(s)););return s}},3142:t=>{var e=Array.isArray;t.exports=e},3305:(t,e,s)=>{var o=s(4497);t.exports=function(){this.__data__=o?o(null):{},this.size=0}},3401:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>n});var o=s(935),r=s.n(o)()(!1);r.push([t.id,"html, body {\r\n    width: 100%;\r\n    height: 100%;\r\n    padding: 0;\r\n    margin: 0;\r\n}\r\n\r\n:focus-visible {\r\n  outline: none;\r\n}\r\n\r\n.ridge-composite {\r\n    position: relative;\r\n    .ridge-runtime-hidden {\r\n        display: none;\r\n    }\r\n    &.is-edit {\r\n        .ridge-runtime-hidden {\r\n            display: initial;\r\n        }\r\n    }\r\n}\r\n\r\n.ridge-composite > .ridge-element {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n}\r\n.ridge-portalled {\r\n    display: none;\r\n}\r\n\r\n.ridge-is-full {\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n.ridge-is-hidden {\r\n    display: none;\r\n}\r\n\r\n.ridge-element:has(.ridge-overlay) {\r\n  position: relative;\r\n}\r\n.ridge-overlay {\r\n    position: absolute;\r\n    left: 0;\r\n    right: 0;\r\n    top: 0;\r\n    bottom: 0;\r\n}\r\n\r\n.ridge-webstart-error {\r\n    position: fixed;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    padding: 20px;\r\n    background-color: rgba(255, 0, 0, 0.726);\r\n    color: white;\r\n    font-family: Arial, sans-serif;\r\n    font-size: 18px;\r\n    border-radius: 8px;\r\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\r\n    z-index: 9999;\r\n    text-align: center;\r\n    max-width: 80%;\r\n    animation: fadeIn 0.3s ease-out;\r\n}\r\n@keyframes fadeIn {\r\n    from {\r\n        opacity: 0;\r\n    }\r\n    to {\r\n        opacity: 1;\r\n    }\r\n}\r\n\r\n.status-Loading {\r\n    background: linear-gradient(90deg,#2e32380d 25%,#2e323817 44%,#2e32380d 88%);\r\n    background-size: 400% 100%;\r\n    animation: skeleton-loading 3s ease infinite;\r\n    animation-fill-mode: forwards;\r\n}\r\n\r\n\r\n.status-not-found, .status-render-error, .status-Circular, .status-Page-not-found {\r\n    position: relative;\r\n    font-size: 9px;\r\n    background-color: rgba(253, 185, 165, .3);\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    background-position: center;\r\n    overflow: hidden;\r\n}\r\n\r\n.status-not-found::before, .status-Circular::before, .status-Page-not-found::before {  \r\n    content: \"内容未找到\";  \r\n    position: absolute;  \r\n    padding-left: 26px;\r\n    left: 50%;\r\n    top: 50%;  \r\n    transform: translate(-50%, -50%);\r\n    font-size: 14px;  \r\n    z-index: -1;  \r\n    background-size: 22px;\r\n    background-repeat: no-repeat;\r\n    background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1em' height='1em' viewBox='0 0 24 24'%3E%3Cpath fill='%23e86868' d='M11.953 2C6.465 2 2 6.486 2 12s4.486 10 10 10s10-4.486 10-10S17.493 2 11.953 2M13 17h-2v-2h2zm0-4h-2V7h2z'/%3E%3C/svg%3E\");\r\n    pointer-events: none; /* 防止背景文字影响鼠标事件 */  \r\n}  \r\n\r\n.status-Circular::before {\r\n    content: \"循环渲染异常\"; \r\n}\r\n.status-Page-not-found::before {\r\n    content: \"页面未找到\";  \r\n}\r\n\r\n.ridge-composite:not(.is-edit) .is-store {\r\n    display: none;\r\n}\r\n@keyframes skeleton-loading {\r\n    0% {\r\n        background-position: 100% 50%\r\n    }\r\n\r\n    to {\r\n        background-position: 0 50%\r\n    }\r\n}",""]);const n=r},3417:t=>{var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return e.test(t)}},3422:(t,e,s)=>{var o=s(7073),r=s(6285),n=Object.prototype.hasOwnProperty;t.exports=function(t,e,s){var i=t[e];n.call(t,e)&&r(i,s)&&(void 0!==s||e in t)||o(t,e,s)}},3501:t=>{t.exports=function(t,e,s){var o=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(s=s>r?r:s)<0&&(s+=r),r=e>s?0:s-e>>>0,e>>>=0;for(var n=Array(r);++o<r;)n[o]=t[o+e];return n}},3526:(t,e,s)=>{var o=s(3142),r=s(5187),n=s(6493),i=s(5243);t.exports=function(t,e){return o(t)?t:r(t,e)?[t]:n(i(t))}},3640:(t,e,s)=>{var o=s(4187),r=s(5881),n=s(9850),i=RegExp("['’]","g");t.exports=function(t){return function(e){return o(n(r(e).replace(i,"")),t,"")}}},3655:(t,e,s)=>{var o=s(7379),r=s(1580);t.exports=function(t){if(!r(t))return!1;var e=o(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},3964:(t,e,s)=>{var o=s(7034);t.exports=function(t,e){var s=this.__data__,r=o(s,t);return r<0?(++this.size,s.push([t,e])):s[r][1]=e,this}},4066:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},4187:t=>{t.exports=function(t,e,s,o){var r=-1,n=null==t?0:t.length;for(o&&n&&(s=t[++r]);++r<n;)s=e(s,t[r],r,t);return s}},4326:(t,e,s)=>{var o=s(8931),r=s(3417),n=s(2237),i=s(5243);t.exports=function(t){return function(e){e=i(e);var s=r(e)?n(e):void 0,a=s?s[0]:e.charAt(0),c=s?o(s,1).join(""):e.slice(1);return a[t]()+c}}},4497:(t,e,s)=>{var o=s(4715)(Object,"create");t.exports=o},4699:(t,e,s)=>{var o=s(2591),r=s(3401);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.id,r,""]]);o(r,{insert:"head",singleton:!1}),t.exports=r.locals||{}},4700:(t,e,s)=>{var o=s(9067);t.exports=function(t,e){var s=t.__data__;return o(e)?s["string"==typeof e?"string":"hash"]:s.map}},4715:(t,e,s)=>{var o=s(9624),r=s(155);t.exports=function(t,e){var s=r(t,e);return o(s)?s:void 0}},4732:(t,e,s)=>{var o=s(4700);t.exports=function(t){return o(this,t).has(t)}},4759:(t,e,s)=>{var o,r=s(1950),n=(o=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+o:"";t.exports=function(t){return!!n&&n in t}},4869:t=>{t.exports=function(t,e,s,o){for(var r=t.length,n=s+(o?1:-1);o?n--:++n<r;)if(e(t[n],n,t))return n;return-1}},4967:(t,e,s)=>{var o="object"==typeof s.g&&s.g&&s.g.Object===Object&&s.g;t.exports=o},5071:(t,e,s)=>{var o=s(7034);t.exports=function(t){return o(this.__data__,t)>-1}},5098:(t,e,s)=>{var o=s(3305),r=s(9361),n=s(1112),i=s(5276),a=s(7452);function c(t){var e=-1,s=null==t?0:t.length;for(this.clear();++e<s;){var o=t[e];this.set(o[0],o[1])}}c.prototype.clear=o,c.prototype.delete=r,c.prototype.get=n,c.prototype.has=i,c.prototype.set=a,t.exports=c},5111:t=>{t.exports=function(t,e){for(var s=-1,o=null==t?0:t.length,r=Array(o);++s<o;)r[s]=e(t[s],s,t);return r}},5187:(t,e,s)=>{var o=s(3142),r=s(1187),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;t.exports=function(t,e){if(o(t))return!1;var s=typeof t;return!("number"!=s&&"symbol"!=s&&"boolean"!=s&&null!=t&&!r(t))||i.test(t)||!n.test(t)||null!=e&&t in Object(e)}},5243:(t,e,s)=>{var o=s(2291);t.exports=function(t){return null==t?"":o(t)}},5276:(t,e,s)=>{var o=s(4497),r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return o?void 0!==e[t]:r.call(e,t)}},5485:(t,e,s)=>{var o=s(4326)("toUpperCase");t.exports=o},5650:(t,e,s)=>{var o=s(8942).Symbol;t.exports=o},5681:(t,e,s)=>{var o=s(4700);t.exports=function(t){var e=o(this,t).delete(t);return this.size-=e?1:0,e}},5813:t=>{var e=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;t.exports=function(t){return e.test(t)}},5881:(t,e,s)=>{var o=s(9968),r=s(5243),n=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,i=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");t.exports=function(t){return(t=r(t))&&t.replace(n,o).replace(i,"")}},6005:(t,e,s)=>{var o=s(5243),r=s(5485);t.exports=function(t){return r(o(t).toLowerCase())}},6040:(t,e,s)=>{var o=s(1187);t.exports=function(t){if("string"==typeof t||o(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},6123:(t,e,s)=>{var o=s(7923);t.exports=function(t,e,s){var r=null==t?void 0:o(t,e);return void 0===r?s:r}},6285:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},6403:(t,e,s)=>{var o=s(2945),r=/^\s+/;t.exports=function(t){return t?t.slice(0,o(t)+1).replace(r,""):t}},6493:(t,e,s)=>{var o=s(6853),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,i=o((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(r,(function(t,s,o,r){e.push(o?r.replace(n,"$1"):s||t)})),e}));t.exports=i},6853:(t,e,s)=>{var o=s(9011);t.exports=function(t){var e=o(t,(function(t){return 500===s.size&&s.clear(),t})),s=e.cache;return e}},7034:(t,e,s)=>{var o=s(6285);t.exports=function(t,e){for(var s=t.length;s--;)if(o(t[s][0],e))return s;return-1}},7073:(t,e,s)=>{var o=s(2532);t.exports=function(t,e,s){"__proto__"==e&&o?o(t,e,{configurable:!0,enumerable:!0,value:s,writable:!0}):t[e]=s}},7144:(t,e,s)=>{var o=s(7034);t.exports=function(t){var e=this.__data__,s=o(e,t);return s<0?void 0:e[s][1]}},7250:t=>{var e=1e3,s=60*e,o=60*s,r=24*o,n=7*r;function i(t,e,s,o){var r=e>=1.5*s;return Math.round(t/s)+" "+o+(r?"s":"")}t.exports=function(t,a){a=a||{};var c,l,h=typeof t;if("string"===h&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(i){var a=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return a*n;case"days":case"day":case"d":return a*r;case"hours":case"hour":case"hrs":case"hr":case"h":return a*o;case"minutes":case"minute":case"mins":case"min":case"m":return a*s;case"seconds":case"second":case"secs":case"sec":case"s":return a*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(t);if("number"===h&&isFinite(t))return a.long?(c=t,(l=Math.abs(c))>=r?i(c,l,r,"day"):l>=o?i(c,l,o,"hour"):l>=s?i(c,l,s,"minute"):l>=e?i(c,l,e,"second"):c+" ms"):function(t){var n=Math.abs(t);return n>=r?Math.round(t/r)+"d":n>=o?Math.round(t/o)+"h":n>=s?Math.round(t/s)+"m":n>=e?Math.round(t/e)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},7379:(t,e,s)=>{var o=s(5650),r=s(8870),n=s(9005),i=o?o.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":i&&i in Object(t)?r(t):n(t)}},7452:(t,e,s)=>{var o=s(4497);t.exports=function(t,e){var s=this.__data__;return this.size+=this.has(t)?0:1,s[t]=o&&void 0===e?"__lodash_hash_undefined__":e,this}},7655:(t,e,s)=>{var o=s(3422),r=s(3526),n=s(9632),i=s(1580),a=s(6040);t.exports=function(t,e,s,c){if(!i(t))return t;for(var l=-1,h=(e=r(e,t)).length,u=h-1,d=t;null!=d&&++l<h;){var p=a(e[l]),f=s;if("__proto__"===p||"constructor"===p||"prototype"===p)return t;if(l!=u){var m=d[p];void 0===(f=c?c(m,p,d):void 0)&&(f=i(m)?m:n(e[l+1])?[]:{})}o(d,p,f),d=d[p]}return t}},7706:t=>{t.exports=function(t,e,s){for(var o=s-1,r=t.length;++o<r;)if(t[o]===e)return o;return-1}},7891:(t,e,s)=>{t.exports=function(t){function e(t){let s,r,n,i=null;function a(...t){if(!a.enabled)return;const o=a,r=Number(new Date),n=r-(s||r);o.diff=n,o.prev=s,o.curr=r,s=r,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let i=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((s,r)=>{if("%%"===s)return"%";i++;const n=e.formatters[r];if("function"==typeof n){const e=t[i];s=n.call(o,e),t.splice(i,1),i--}return s})),e.formatArgs.call(o,t),(o.log||e.log).apply(o,t)}return a.namespace=t,a.useColors=e.useColors(),a.color=e.selectColor(t),a.extend=o,a.destroy=e.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==i?i:(r!==e.namespaces&&(r=e.namespaces,n=e.enabled(t)),n),set:t=>{i=t}}),"function"==typeof e.init&&e.init(a),a}function o(t,s){const o=e(this.namespace+(void 0===s?":":s)+t);return o.log=this.log,o}function r(t,e){let s=0,o=0,r=-1,n=0;for(;s<t.length;)if(o<e.length&&(e[o]===t[s]||"*"===e[o]))"*"===e[o]?(r=o,n=s,o++):(s++,o++);else{if(-1===r)return!1;o=r+1,n++,s=n}for(;o<e.length&&"*"===e[o];)o++;return o===e.length}return e.debug=e,e.default=e,e.coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){const t=[...e.names,...e.skips.map((t=>"-"+t))].join(",");return e.enable(""),t},e.enable=function(t){e.save(t),e.namespaces=t,e.names=[],e.skips=[];const s=("string"==typeof t?t:"").trim().replace(" ",",").split(",").filter(Boolean);for(const t of s)"-"===t[0]?e.skips.push(t.slice(1)):e.names.push(t)},e.enabled=function(t){for(const s of e.skips)if(r(t,s))return!1;for(const s of e.names)if(r(t,s))return!0;return!1},e.humanize=s(7250),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((s=>{e[s]=t[s]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let s=0;for(let e=0;e<t.length;e++)s=(s<<5)-s+t.charCodeAt(e),s|=0;return e.colors[Math.abs(s)%e.colors.length]},e.enable(e.load()),e}},7905:(t,e,s)=>{var o=s(2478);t.exports=function(t,e){for(var s=-1,r=t.length;++s<r&&o(e,t[s],0)>-1;);return s}},7923:(t,e,s)=>{var o=s(3526),r=s(6040);t.exports=function(t,e){for(var s=0,n=(e=o(e,t)).length;null!=t&&s<n;)t=t[r(e[s++])];return s&&s==n?t:void 0}},8250:(t,e,s)=>{var o=s(9753),r=s(5681),n=s(88),i=s(4732),a=s(9068);function c(t){var e=-1,s=null==t?0:t.length;for(this.clear();++e<s;){var o=t[e];this.set(o[0],o[1])}}c.prototype.clear=o,c.prototype.delete=r,c.prototype.get=n,c.prototype.has=i,c.prototype.set=a,t.exports=c},8774:(t,e,s)=>{var o=s(2478);t.exports=function(t,e){for(var s=t.length;s--&&o(e,t[s],0)>-1;);return s}},8870:(t,e,s)=>{var o=s(5650),r=Object.prototype,n=r.hasOwnProperty,i=r.toString,a=o?o.toStringTag:void 0;t.exports=function(t){var e=n.call(t,a),s=t[a];try{t[a]=void 0;var o=!0}catch(t){}var r=i.call(t);return o&&(e?t[a]=s:delete t[a]),r}},8931:(t,e,s)=>{var o=s(3501);t.exports=function(t,e,s){var r=t.length;return s=void 0===s?r:s,!e&&s>=r?t:o(t,e,s)}},8942:(t,e,s)=>{var o=s(4967),r="object"==typeof self&&self&&self.Object===Object&&self,n=o||r||Function("return this")();t.exports=n},9005:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},9011:(t,e,s)=>{var o=s(8250);function r(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var s=function(){var o=arguments,r=e?e.apply(this,o):o[0],n=s.cache;if(n.has(r))return n.get(r);var i=t.apply(this,o);return s.cache=n.set(r,i)||n,i};return s.cache=new(r.Cache||o),s}r.Cache=o,t.exports=r},9067:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},9068:(t,e,s)=>{var o=s(4700);t.exports=function(t,e){var s=o(this,t),r=s.size;return s.set(t,e),this.size+=s.size==r?0:1,this}},9361:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},9454:t=>{t.exports=function(t){return t!=t}},9546:t=>{var e=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;t.exports=function(t){return t.match(e)||[]}},9624:(t,e,s)=>{var o=s(3655),r=s(4759),n=s(1580),i=s(4066),a=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,h=c.toString,u=l.hasOwnProperty,d=RegExp("^"+h.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!n(t)||r(t))&&(o(t)?d:a).test(i(t))}},9632:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,s){var o=typeof t;return!!(s=null==s?9007199254740991:s)&&("number"==o||"symbol"!=o&&e.test(t))&&t>-1&&t%1==0&&t<s}},9677:(t,e,s)=>{var o=s(6005),r=s(3640)((function(t,e,s){return e=e.toLowerCase(),t+(s?o(e):e)}));t.exports=r},9753:(t,e,s)=>{var o=s(5098),r=s(1386),n=s(9770);t.exports=function(){this.size=0,this.__data__={hash:new o,map:new(n||r),string:new o}}},9770:(t,e,s)=>{var o=s(4715)(s(8942),"Map");t.exports=o},9850:(t,e,s)=>{var o=s(9546),r=s(5813),n=s(5243),i=s(482);t.exports=function(t,e,s){return t=n(t),void 0===(e=s?void 0:e)?r(t)?i(t):o(t):t.match(e)||[]}},9968:(t,e,s)=>{var o=s(1035)({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"});t.exports=o}},e={};function s(o){var r=e[o];if(void 0!==r)return r.exports;var n=e[o]={id:o,exports:{}};return t[o](n,n.exports,s),n.exports}s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var o in e)s.o(e,o)&&!s.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.nc=void 0,(()=>{"use strict";s(4699);var t=s(124),e=s.n(t),o=s(9011),r=s.n(o),n=s(1237),i=s.n(n);let a=t=>crypto.getRandomValues(new Uint8Array(t));s(9677),s(107);const c=((t,e=21)=>((t,e,s)=>{let o=(2<<Math.log(t.length-1)/Math.LN2)-1,r=-~(1.6*o*e/t.length);return(n=e)=>{let i="";for(;;){let e=s(r),a=r;for(;a--;)if(i+=t[e[a]&o]||"",i.length===n)return i}}})("1234567890abcdefghijklmnopqrstuvwxyz",e,a))(0,10),l=t=>{return(e=t).substring(e.lastIndexOf("/")+1).split(".")[0];var e},h=t=>{if(null==t)return t;const e=String(t).trim();return/^(auto|inherit|initial|unset|0|calc|min|max|clamp)/.test(e)||/[^\d.]\s*\d/.test(e)?e:`${parseFloat(e)||0}px`},u=(t,e="/")=>t.startsWith(e)?t:e+t,d=(t,e)=>{if(e.startsWith("/"))return e;const s=(t.endsWith("/")?t:t.slice(0,t.lastIndexOf("/")+1)).split("/").filter((t=>t));return e.split("/").forEach((t=>{".."===t?s.pop():"."!==t&&t&&s.push(t)})),"/"+s.join("/")},p=window.showError||function(){},f={set:function(t,e,s){return t[e]=s,globalThis.appModulesNotifier[e]&&globalThis.appModulesNotifier[e](s),!0},get:function(t,e){return t[e]}};globalThis.appModules=new Proxy({},f),globalThis.appModulesNotifier={};const m=t=>{const e=t.match(/import(?:\s*(\w+)\s*(?:,\s*\{([^}]+)\})?|\s*\{([^}]+)\}\s*(?:,\s*(\w+))?)\s*from\s*['"]([^'"]+)['"]|import\s+['"]([^'"]+)['"]/);if(e){let t=[],s=null;return e[1]&&(s=e[1]),e[2]?t=e[2].split(",").map((t=>t.trim())):e[3]&&(t=e[3].split(",").map((t=>t.trim()))),e[4]&&(s=e[4]),{moduleNames:t,defaultModuleName:s,filePath:e[5]||e[6]}}return null},g=r()((async t=>{if(p("load Remote:",t),globalThis.appModules[t])return globalThis.appModules[t];let e=t;if(window.ridge&&window.ridge.baseUrl){const s=window.ridge.baseUrl;e.startsWith(s)||(e=s+t)}p("load Remote:",e);const s=`\n      import * as currentModule from '${e}'\n      globalThis.appModules['${e}'] = currentModule\n    `,o=document.createElement("script");return o.type="module",new Promise(((t,r)=>{try{globalThis.appModulesNotifier[e]=s=>{p("Callback:",e),t(s)},o.textContent=s,document.head.append(o)}catch(e){p("remote js error",e),t(null)}}))})),y=(r()((async t=>{let e=t;return window.ridge&&window.ridge.baseUrl&&(e=window.ridge.baseUrl+"/"+e.replace(/^\/npm/,"").replace(/^\//,"")),p("load Remote:",e),await y(e,{load:async t=>{const e=await window.fetch(t,{mode:"cors",credentials:"include"});return e.ok?await e.text():null}})})),async(t,e)=>{const s=await e.load(t);if(s){const{importStatements:o}=(t=>{const e=[];let s=t;const o=/\bimport\s+(?:(?:(?:\*\s+as\s+)?[\w$]+|(?:\{[\s\w$*,]+?\}))\s+from\s+)?['"][^'"]+['"];?/gm;let r;for(;r=o.exec(t);){const{moduleNames:t,filePath:o}=m(r[0]);e.push({moduleNames:t,filePath:o}),s=s.replace(r[0],"")}return{sourceCode:t,updatedSourceCode:s,importStatements:e}})(s);for(const s of o)if(s.filePath.startsWith("/"))await g(s.filePath);else{const o=d(t,s.filePath);await y(o,e)}const r=function(t,e){const s=/import\s+([\s\S]*?)\s+from\s+(['"])([^'"]+)\2/g,o=[];let r;for(;null!==(r=s.exec(t));)o.push(r[3]);return globalThis.appModules[e]||(globalThis.appModules[e]={}),t.replace(/import\s+(\w+)\s+from\s+(['"])([^'"]+)\2/g,((t,s,o,r)=>`const ${s} = globalThis.appModules['${d(e,r)}'].default;`)).replace(/import\s+(['"])([^'"]+)\1/g,"").replace(s,((t,s,o,r)=>`const ${s} = globalThis.appModules['${d(e,r)}'];`)).replace(/export\s+(\{[^}]+\})/g,`globalThis.appModules['${e}'] = $1;`).replace(/export\s+const\s+(\w+)\s*=/g,`globalThis.appModules['${e}'].$1 = $1;`).replace(/export\s+default\s+(\{[\s\S]*\})/g,`globalThis.appModules['${e}'].default = $1;`)}(s,t),n=document.createElement("script"),i=`(function() {\n      ${r}\n    })()`;n.textContent=i;try{document.head.append(n)}catch(t){}finally{document.head.removeChild(n)}return globalThis.appModules[t]}return null});function v(t){const e=l(t),s=`\n      @font-face {\n          font-family: '${e}';\n          src: url('${t}') format('woff2');\n          font-weight: normal;\n          font-style: normal;\n      }\n  `,o=document.createElement("style");return o.type="text/css",o.textContent=s,document.head.appendChild(o),e}function b(t){const e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href=t,document.getElementsByTagName("HEAD")[0].appendChild(e)}const w=e()("ridge:loader"),x=window.showError||function(){},C=class{constructor({baseUrl:t,loadPropControl:e}){this.baseUrl=t.replace(/\/$/,""),this.loadPropControl=e,w("RidgeLoader baseUrl: "+this.baseUrl),this.loadedFonts=[],this.themeUrls={},this.loadComponent=r()(this._loadComponent),this.loadScript=r()(this._loadScript),this.loadExternal=r()(this._loadExternal),this.loadTextContent=r()(this.loadTextContent),this.loadStoreScript=r()(this.loadStoreScript),this.loadLocalJsModule=y,this.loadRemoteJsModule=g,this.confirmPackageDependencies=r()(this._confirmPackageDependencies),this.loadWebFont=r()(v),this.loadCss=b,this.jsonCache=new Map,this.codeCache=new Map,this.blobCache=new Map}getURIPath(t){return`${this.baseUrl}/${t}`.replace(/(https?:\/\/)|(\/)+/g,((t,e,s)=>e||"/"))}async _loadComponent(t){let e,s;if("object"==typeof t)e=t.packageName,s=t.path;else{const o=t.split("/");o[0].startsWith("@")?(e=o.splice(0,2).join("/"),s=o.join("/")):(e=o.splice(0,1).join("/"),s=o.join("/"))}const o=await this.doLoadComponent({packageName:e,path:s});return o&&(o.componentPath=t),o}async doLoadComponent({packageName:t,path:e}){w("doLoadComponent",t,e);const s=await this.getPackageJSON(t);if(null==s)return null;await this.confirmPackageDependencies(t);let o=null;return s.ridgeDist?(await this.loadScript(`${s.name}/${s.ridgeDist}`),o=window[s.name][e]):o=await this.loadComponentScript({packageName:t,path:e}),o&&await this.prepareComponent(o,{packageName:t,path:e},s),o}async prepareComponent(t,{packageName:e,path:s}){if(t.packageName=e,t.path=s,t.title=t.title||t.label,Array.isArray(t.externals))for(const s of t.externals)s.startsWith("/")?await this.loadScript(s):await this.loadScript(e+"/"+s);if(t.component){if("function"==typeof t.component&&"AsyncFunction"===t.component.constructor.name&&(t.component=(await t.component()).default),this.loadPropControl)for(const e of t.props||[])e&&e.control&&"function"==typeof e.control&&e.control.toString().startsWith("()")&&(e.controlComponent=(await e.control()).default),e.options&&"function"==typeof e.options&&e.options.toString().startsWith("()")&&(e.optionsLoads=await e.options())}else w("组件 Component定义未加载到",t)}on(t,e){this.eventCallbacks.push({eventName:t,callback:e})}async loadComponentScript({packageName:t,path:e}){await this.loadScript(`${t}/build/${e}.js`);const s=`${t}/${e}`;return window[s]?window[s].default:null}removeCss(t){if(!t)return;const e=Array.from(document.head.children).filter((t=>"link"===t.tagName.toLowerCase()));for(const s of e)s.href.endsWith(t)&&document.head.removeChild(s)}getFinalCDNUrl(t){let e=t.replace(/\/\//g,"/");e.startsWith("/")||(e="/"+e),e=this.baseUrl+e,e.startsWith("/")||e.indexOf("")}async _loadScript(t){if(null!=t)try{let e=t.replace(/\/\//g,"/");if(e.startsWith("/")||(e="/"+e),Array.from(document.querySelectorAll("script")).find((t=>t.src&&t.src.endsWith(e)))||Array.from(document.querySelectorAll("link")).find((t=>t.href&&t.href.endsWith(e))))return w("Script loaded: ",e),e;const s=this.baseUrl+e;return x("Load:"+s),s.endsWith(".css")?await b(s):await async function(t){if(!t||"string"!=typeof t)throw new Error("Invalid script URL provided");let e;try{e=new URL(t,window.location.href)}catch(e){throw new Error(`Malformed script URL: ${t}`)}if(!["https:","http:"].includes(e.protocol))throw new Error(`Unsupported protocol: ${e.protocol}`);return function(t){Array.from(document.querySelectorAll("script[src]")).find((e=>e.src===t))}(t),new Promise(((s,o)=>{const r=document.createElement("script");r.src=t,e.origin!==window.location.origin&&(r.crossOrigin="anonymous"),r.onload=()=>{window.showError&&window.showError(`Script successfully: ${t}`),s()},r.onerror=e=>{window.showError&&window.showError(`Failed to load script: ${t}`,e),r.parentNode&&r.parentNode.removeChild(r),o(new Error(`Script load failed: ${t}`))},document.head.appendChild(r)}))}(s),e}catch(e){console.error("JS Load Error:",`${t}`)}}async getPackageJSON(t){return this.loadJSON(`${t}/package.json`)}async _confirmPackageDependencies(t){w("_confirmPackageDependencies",t);const e=await this.getPackageJSON(t);if(null==e)return;const s=Object.keys(e.dependencies||{});for(const t of s)await this.loadExternal(t);const o=e.externals||e.prepares,r=[];if(Array.isArray(o))for(const t of o)t.startsWith("/")?r.push(await this.loadScript(t)):r.push(await this.loadScript(e.name+"/"+t));await Promise.allSettled(r),window.ridgeTheme&&window.ridgeTheme[t]?this.loadPackageTheme(t,window.ridgeTheme[t]):e.themes&&this.loadPackageTheme(t,e.themes.default)}async loadPackageTheme(t,e){this.themeUrls[t]&&this.removeCss(this.themeUrls[t]),b(this.baseUrl+"/"+e),this.themeUrls[t]=e}async _loadExternal(t){w("_loadExternal",t);const e=i().externals.filter((e=>e.module===t))[0];if(e){if(w("Found External Package",e),e.root&&window[e.root])return;if(e.dependencies)for(const t of e.dependencies)await this.loadExternal(t);if(Array.isArray(e.dist)){const t=[];for(const s of e.dist)t.push(this.loadScript(s));await Promise.allSettled(t)}else"string"==typeof e.dist&&await this.loadScript(e.dist)}}async loadStoreScript(t){return g(t)}async fetchJSON(t){x("Fetch:"+t);const e=await window.fetch(t,{mode:"cors",credentials:"include"});return e.ok?await e.json():null}async loadTextContent(t){const e=this.getURIPath(t);x("Fetch:"+e);const s=await window.fetch(e,{mode:"cors",credentials:"include"});return s.ok?await s.text():null}getJSONCache(t){return globalThis&&globalThis["json://"+t]?globalThis["json://"+t]:this.jsonCache.get(t)}setJSONCache(t,e){const s=this.getURIPath(t);this.jsonCache.set(s,e)}async loadJSON(t){const e=this.getURIPath(t);if(!this.getJSONCache(e)){const t=await this.fetchJSON(e);t&&this.jsonCache.set(e,t)}return this.getJSONCache(e)}},S=(Symbol(),Symbol()),P=Object.getPrototypeOf,j=new WeakMap,E=(t,e=!0)=>{j.set(t,e)},O=t=>"object"==typeof t&&null!==t,k=new WeakMap,A=new WeakSet,[_]=((t=Object.is,e=(t,e)=>new Proxy(t,e),s=t=>O(t)&&!A.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer),o=t=>{switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t}},r=new WeakMap,n=(t,e,s=o)=>{const i=r.get(t);if((null==i?void 0:i[0])===e)return i[1];const a=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return E(a,!0),r.set(t,[e,a]),Reflect.ownKeys(t).forEach((e=>{if(Object.getOwnPropertyDescriptor(a,e))return;const o=Reflect.get(t,e),{enumerable:r}=Reflect.getOwnPropertyDescriptor(t,e),i={value:o,enumerable:r,configurable:!0};if(A.has(o))E(o,!1);else if(o instanceof Promise)delete i.value,i.get=()=>s(o);else if(k.has(o)){const[t,e]=k.get(o);i.value=n(t,e(),s)}Object.defineProperty(a,e,i)})),Object.preventExtensions(a)},i=new WeakMap,a=[1,1],c=o=>{if(!O(o))throw new Error("object required");const r=i.get(o);if(r)return r;let l=a[0];const h=new Set,u=(t,e=++a[0])=>{l!==e&&(l=e,h.forEach((s=>s(t,e))))};let d=a[1];const p=t=>(e,s)=>{const o=[...e];o[1]=[t,...o[1]],u(o,s)},f=new Map,m=t=>{var e;const s=f.get(t);s&&(f.delete(t),null==(e=s[1])||e.call(s))},g=Array.isArray(o)?[]:Object.create(Object.getPrototypeOf(o)),y=e(g,{deleteProperty(t,e){const s=Reflect.get(t,e);m(e);const o=Reflect.deleteProperty(t,e);return o&&u(["delete",[e],s]),o},set(e,o,r,n){const a=Reflect.has(e,o),l=Reflect.get(e,o,n);if(a&&(t(l,r)||i.has(r)&&t(l,i.get(r))))return!0;var d;m(o),O(r)&&(r=(t=>t&&(j.has(t)?j.get(t):P(t)===Object.prototype||P(t)===Array.prototype))(d=r)&&d[S]||null||r);let g=r;if(r instanceof Promise)r.then((t=>{r.status="fulfilled",r.value=t,u(["resolve",[o],t])})).catch((t=>{r.status="rejected",r.reason=t,u(["reject",[o],t])}));else{!k.has(r)&&s(r)&&(g=c(r));const t=!A.has(g)&&k.get(g);t&&((t,e)=>{if(f.has(t))throw new Error("prop listener already exists");if(h.size){const s=e[3](p(t));f.set(t,[e,s])}else f.set(t,[e])})(o,t)}return Reflect.set(e,o,g,n),u(["set",[o],r,l]),!0}});i.set(o,y);const v=[g,(t=++a[1])=>(d===t||h.size||(d=t,f.forEach((([e])=>{const s=e[1](t);s>l&&(l=s)}))),l),n,t=>(h.add(t),1===h.size&&f.forEach((([t,e],s)=>{if(e)throw new Error("remove already exists");const o=t[3](p(s));f.set(s,[t,o])})),()=>{h.delete(t),0===h.size&&f.forEach((([t,e],s)=>{e&&(e(),f.set(s,[t]))}))})];return k.set(y,v),Reflect.ownKeys(o).forEach((t=>{const e=Object.getOwnPropertyDescriptor(o,t);"value"in e&&(y[t]=o[t],delete e.value,delete e.writable),Object.defineProperty(g,t,e)})),y})=>[c,k,A,t,e,s,o,r,n,i,a])();function N(t={}){return _(t)}var R=s(1263),F=s.n(R),M=s(6123),L=s.n(M);const U=t=>{try{return JSON.parse(JSON.stringify(t))}catch(e){return t}};function D(t){return t&&"object"==typeof t&&t.constructor===Object}function I(t,e){if(t===e)return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return t===e;const s=Object.keys(t),o=Object.keys(e);if(s.length!==o.length)return!1;for(const r of s)if(!o.includes(r)||!I(t[r],e[r]))return!1;return!0}const T=new Map,W=e()("ridge:store"),$=e()("ridge:store-error");class J{constructor(t,e){this.module=t,this.composite=e,this.watchers={"*":new Set},this.state={},this.globals={},this.context=new Proxy(this,{get:function(t,e){switch(e){case"context":return t.composite.context;case"composite":return t.composite;case"emit":return(e,s)=>{t.composite.emit(e,U(s))};case"setState":return e=>{Object.assign(t.state,e)};case"properties":return t.properties;case"state":return t.state;case"scope":return;default:if(void 0!==t.state[e])return t.computedUsedState&&t.computedUsedState.push(e),t.state[e];if(t.module.actions&&t.module.actions[e])return t.module.actions[e];if(t.module.computed&&t.module.computed[e]){if("function"==typeof t.module.computed[e])return t.module.computed[e].call(t.context);if("function"==typeof t.module.computed[e].get)return t.module.computed[e].get.call(t.context)}else{if(void 0!==t.properties[e])return t.properties[e];if(void 0!==t.globals[e])return t.globals[e];if(window[e])return window[e]}}},set:function(t,e,s){return void 0!==t.state[e]?t.state[e]=s:t.globals[e]=s,!0}}),this.scheduledJobs=new Set}async initStore(t,s){if(this.properties=t,this.globalVariables=s,"function"==typeof this.module.state)try{this.state=N(this.module.state(t))}catch(t){console.error("initStore Error",t)}else"object"==typeof this.module.state?this.state=N(U(this.module.state)):this.state=N({});for(const t of this.module.properties||[])null==this.properties[t.name]&&null!=t.value&&(this.properties[t.name]=t.value);if(this.module.externals)if(Array.isArray(this.module.externals))for(const t of this.module.externals)await this.composite.context.loadScript(t);else if("string"==typeof this.module.externals)await this.composite.context.loadScript(this.module.externals);else for(const t of Object.keys(this.module.externals))await this.composite.context.loadScript(this.module.externals[t]);if(Array.isArray(this.module.dependencies))for(const t of this.module.dependencies)await this.composite.context.loadScript(t);if(this.state&&function(t,e){const s=k.get(t);let o;s||console.warn("Please use proxy object");const r=[],n=s[3];let i=!1;n((t=>{r.push(t),o||(o=Promise.resolve().then((()=>{o=void 0,i&&e(r.splice(0))})))}));i=!0}(this.state,(t=>{this.onMutations(t)})),this.module.setup)try{const t=await async function(t,e){if(!e)return await t(),-1;const s=performance.now();return await t(),performance.now()-s}((async()=>{await this.module.setup.call(this.context,this.context)}),e().enabled);t>-1&&e()("Module Setup:",this.module.name,"Duration:",t+"ms"),this.storeSetUp=!0,this.flushScheduledJobs()}catch(t){console.error("Module Setup Error!",this.module,t)}}updateProps(t){this.properties=t;const e=[];for(const s in t)this.watchers[s]&&e.push(...this.watchers[s]),this.module.watch&&this.module.watch[s]&&this.module.watch[s].call(this.context,t[s],t);this.scheduleCallback(e),this.module.update&&this.module.update.call(this.context,t),this.flushScheduledJobs()}subscribe(t,e,s){const o=e.join(".");switch(t){case"state":case"prop":this.addWatchers(o,s);break;case"computed":if(this.module.computed&&this.module.computed[o])if(Array.isArray(this.module.computed[o].dependencies))for(const t of this.module.computed[o].dependencies)this.addWatchers(t,s);else 0===(this.module.computed[o].get||this.module.computed[o]).length&&this.addWatchers("*",s)}}addWatchers(t,e){null==this.watchers[t]&&(this.watchers[t]=new Set),this.watchers[t].add(e)}getValue(t,e,s){let o=null;if("state"===t)o=L()(this.state,e);else if("computed"===t){const t=[...s];t.push(this.context.state);const r=this.module.computed[e];if(r){this.computedUsedState=[];try{"function"==typeof r?o=r.call(this.context,...t):"function"==typeof r.get&&(o=r.get.call(this.context,...t))}catch(t){console.error("getValue Error",t),this.storeSetUp&&console.error("ComputedError: ",r,s)}}}else if("prop"===t)return this.context.properties[e];return null!=o&&(o=U(o)),o}dispatchChange(t,e,s,o){if("state"===t)F()(this.state,e.split("."),s);else if("computed"===t&&this.module.computed&&"function"==typeof this.module.computed[e]?.set)try{this.module.computed[e]?.set.call(this.context,s,this.state,...o)}catch(t){$("dispatchChange Error",t)}}doStoreAction(t,{scopedData:s,payload:o,eventArgs:r}){if(this.module.actions&&this.module.actions[t])try{const n=[];(function(t){if(T.has(t))return T.get(t);const e="function"==typeof t&&/^[^{]*=>/.test(t.toString());return T.set(t,e),e})(this.module.actions[t])&&n.push(this.context),""!==r&&n.push(r),s&&s.length&&n.push(...s),null!=o&&(Array.isArray(o)?n.push(...o):n.push(o));const i=function(t,e){if(!e)return t(),-1;const s=performance.now();return t(),performance.now()-s}((()=>{const e=this.module.actions[t].call(this.context,...n);"object"==typeof e&&this.context.setState(e)}),e().enabled);i>-1&&e()("Action Dura",t,n,i)}catch(t){console.error("doStoreAction Error",t)}}onMutations(t){for(const e of t){const[t,s,o,r]=e;W("mutation",t,s.join("."),o,r),this.onStateChange(s,o,r)}this.flushScheduledJobs()}onStateChange(t,e,s){const o=t.join("."),r=[],n=new Set;this.watchers["*"]&&r.push(...this.watchers["*"]);const i=Object.keys(this.watchers);for(const t of i)(t.startsWith(o)||o.startsWith(t+".")||t===o)&&r.push(...this.watchers[t]);const a=Object.keys(this.module.watch||{});for(const t of a)(t.startsWith(o)||o.startsWith(t+".")||t===o)&&n.add(this.module.watch[t]);r.push(...Array.from(n).map((t=>()=>{t.call(this.context,s,e)}))),this.scheduleCallback(r)}scheduleCallback(t){for(const e of t)this.scheduledJobs.add(e)}flushScheduledJobs(){for(const t of this.scheduledJobs)try{t()}catch(t){console.error("job exec error",t)}this.scheduledJobs.clear()}destory(){this.module.destory&&this.module.destory.call(this.context)}}const z="Promote",V="props",B=e()("ridge:store");e()("ridge:store-error");class H{constructor(t){this.composite=t,this.properties=t.properties,this.storeObjects={}}setProperties(t){this.properties=t;for(const e of Object.values(this.storeObjects))e.updateProps(t)}load(t,e){for(const s of Array.isArray(t)?t:[t])this.registerPageStore(s,e)}getStoreValue(t,e){const[s,o,...r]=t.split(".");return s===z&&o===V?this.properties[r[0]]:this.storeObjects[s]?this.storeObjects[s].getValue(o,r.join("."),e):void 0}subscribe(t,e){if(t)try{const[s,o,...r]=t.split(".");B("subscribe",t),this.storeObjects[s]&&this.storeObjects[s].subscribe(o,r,e)}catch(e){console.error("subscribe error",t,e)}}dispatchChange(t,e,s){const[o,r,...n]=t.split(".");this.storeObjects[o]&&this.storeObjects[o].dispatchChange(r,n.join("."),e,s)}doStoreAction(t,e,s){this.storeObjects[t]&&this.storeObjects[t].doStoreAction(e,s)}registerPageStore(t,e){if(B("RegisterPageStore",t),!t.name)return void B("Store Not Registered: No Name");const s=t.name;this.storeObjects[s]=new J(t,this.composite),this.storeObjects[s].initStore(e)}destory(){for(const t of Object.values(this.storeObjects))t.destory()}}class Z{async mount(){}setOption(t){}updateProps(t){}layout(t){}invoke(t,e){}on(t,e){}destroy(){}}class G extends Z{constructor(t,e={}){super(),this.JSXComponent=t,this.props=e,this.props.ref||(this.props.ref=React.createRef()),this.renderRef=this.props.ref}mount(t){this.el=t,this.root=ReactDOM.createRoot(t),this.root.render(this.getRenderInstance())}getRenderInstance(){return React.createElement(this.JSXComponent,this.props)}on(t,e){Object.assign(this.props,{[t]:e}),this.root.render(React.createElement(this.JSXComponent,this.props),this.el)}invoke(t,e){if(this.renderRef&&this.renderRef.current&&this.renderRef.current[t]&&"function"==typeof this.renderRef.current[t])return this.renderRef.current[t](...e||[])}hasMethod(t){return this.renderRef&&this.renderRef.current&&this.renderRef.current[t]&&"function"==typeof this.renderRef.current[t]}setOption(t){this.updateProps(t)}updateProps(t){this.props=Object.assign({},t,{ref:this.props.ref});try{this.renderRef&&this.renderRef.current&&"function"==typeof this.renderRef.current.updateProps&&this.renderRef.current.updateProps(t),this.root.render(this.getRenderInstance())}catch(t){console.error("React update error",t)}}layout(t){ReactDOM.render(React.createElement(this.JSXComponent,t),this.el)}destroy(){this.root.unmount(),this.renderRef&&(this.renderRef=null)}}class q extends Z{constructor(t,e={}){super(),this.VannilaComponent=t,this.props=e}mount(t){this.el=t,this.getRenderInstance().mount(t)}getRenderInstance(){return this.instance||(this.instance=new this.VannilaComponent(this.props)),this.instance}on(t,e){this.instance.on(t,e)}invoke(t,e){if(this.getRenderInstance()[t])return this.getRenderInstance()[t].apply(this.getRenderInstance(),e)}hasMethod(t){return null!=this.getRenderInstance()[t]}setOption(t){this.updateProps(t)}updateProps(t){this.getRenderInstance().update(t)}layout(){this.getRenderInstance().layout()}destroy(){this.instance&&(this.instance.destroy&&this.instance.destroy(),this.instance=null)}}const K=t=>({scope:e}={})=>{class s extends React.Component{constructor(t){super(t),this.scope=t.scope,this.ref=React.createRef(),this.ridgeElement=null}componentDidMount(){this.props.scope?this.ridgeElement?(this.ridgeElement.setScopedData(this.props.scope),this.ridgeElement.forceUpdate()):(this.ridgeElement=this.props.element.clone(),this.ridgeElement.setScopedData(this.props.scope),this.ridgeElement.mount(this.ref.current)):(this.ridgeElement=this.props.element,this.ridgeElement.mount(this.ref.current))}componentWillUnmount(){}render(){return React.createElement("div",{ref:this.ref,style:{width:"100%",height:"100%"}})}}return React.createElement(s,{element:t,scope:e})},X=class{async load(){}async mount(t){}setProperties(t){}unmount(){}invoke(){}setStatus(t,e){this.status=t,this.el&&this.el.classList.add("status-"+t)}getStatus(){return this.status}removeStatus(t){if(this.status=null,this.el)for(const e of this.el.classList)t?e==="status-"+t&&this.el.classList.remove(e):e.startsWith("status-")&&this.el.classList.remove(e)}},Y=(t,e,s)=>{const o=t.classList;let r=!1;for(let n=0;n<o.length;n++)if(o[n].startsWith(e+":")){r=!0;const i=o[n].substring(e.length+1),a=i.split("-");if(s)t.classList.remove(i);else{if(a.length>1){const e=Array.from(t.classList).filter((t=>t.startsWith(a[0]+"-")));if(e.length>1){t.setAttribute("cache-pseduo-"+a[0],e.join(","));for(const s of e)t.classList.remove(s)}}t.classList.add(i)}}return r},Q=(t,e,s)=>{const o=t.querySelectorAll(".has-pseudo-"+e);t.classList.contains("has-pseudo-"+e)&&Y(t,e,s);for(const t of o)Y(t,e,s)},tt=(t,e)=>{if(Array.isArray(t)){const s=[],o=t.map((t=>{const[o,r]=t.split("/");return r?(e.loader.confirmPackageDependencies(o),et(r,s)):et(t,s)}));for(const t of s)o.push("has-pseudo-"+t);return o}return[]},et=(t,e)=>{const[s,o]=t.split(":");return o&&e.push(s),t},st=e()("ridge:element");class ot extends X{constructor({config:t,composite:e,componentDefinition:s}){super(),this.config=t,this.uuid="ins-"+c(8),this.composite=e,this.componentDefinition=s,this.properties={},this.events={},st("create",this.config.id),this.onMounted((()=>{this.bindDOMEvents()}))}getId(){return this.config.id}getProperties(){return Object.assign({width:this.style.width,height:this.style.height,visible:this.style.visible,__composite:this.composite,__applyEffect:this.composite.context.applyEffect.bind(this.composite.context)},this.config.props,this.events,this.properties,{children:this.children})}getConfig(){return this.config}getEl(){return this.el}getParent(){return this.parent}getScopedData(){const t=this.getParent(),e=t?t.getScopedData():[];return null==this.scopedData?e:[this.scopedData,...e]}setScopedData(t){this.scopedData=t}async load(t){if(this.componentDefinition||this.config.path&&(this.componentDefinition=await this.composite.context.loader.loadComponent(this.config.path)),this.componentDefinition){if(t&&this.config.props.children)for(const t of this.config.props.children){const e=this.composite.getNode(t);e&&await e.load(!0)}return!0}return this.setStatus("not-found"),!1}firstPaint(t){t&&(this.el=t),st("el first paint",this.config.title,this),this.firstPainted=!0,this.setStatus("Loading"),this.el.setAttribute("ridge-title",this.config.title),this.el.setAttribute("ridge-mount","mounting"),this.style=Object.assign({},this.config.style),this.updateStyle()}async mount(t){if(t){if(this.el&&this.el!==t){st("Do Unmount Before Mount");try{this.unmount()}catch(t){}}this.el=t}if(this.el&&(st("mounting",this.config.id,this),this.el.ridgeNode=this,this.firstPainted||this.firstPaint(),this.forceUpdateStyle(),this.componentDefinition||await this.load(),this.componentDefinition))try{this.initializeEvents(),this.initSubscription(),this.updateConnectedProperties(),this.preparePropsBeforeRender(),this.createRenderer(),this.mounted&&this.mounted(),st("mounted",this.config.id,this),this.el.setAttribute("ridge-mount","mounted"),this.removeStatus()}catch(t){console.error("ridge element mount error:",t)}}getIsMounted(){return this.isMounted}mounted(){this.mounteds&&this.mounteds.forEach((t=>t(this))),this.isMounted=!0}onMounted(t){!0===this.isMounted?t(this):(this.mounteds||(this.mounteds=[]),this.mounteds.push(t))}initChildren(){if(this.config.props.children&&null==this.children){this.children=[];for(const t of this.config.props.children){const e=this.composite.getNode(t);e&&(e.parent=this,this.children.push(e),e.initChildren())}}if(this.config.slots&&this.config.slots.length)for(const t of this.config.slots){const e=this.composite.getNode(t);e&&(e.parent=this,e.isSlot=!0,e.initChildren())}}initializeEvents(){if(this.componentDefinition.props){const t=this.componentDefinition.props.find((t=>"value"===t.name||!0===t.input));t&&(this.inputKey=t.name)}this.inputKey&&this.config.propEx[this.inputKey]&&(this.events.input=t=>{this.composite.store.dispatchChange(this.config.propEx[this.inputKey],t,this.getScopedData())},this.events.onChange=t=>{this.composite.store.dispatchChange(this.config.propEx[this.inputKey],t,this.getScopedData())});for(const[t,e]of Object.entries(this.config.events??{}))this.events[t]=(...s)=>{if(Array.isArray(e)){for(const t of e)if(t.store&&t.method){const e={payload:s,scopedData:this.getScopedData(),eventArgs:t.payload};this.composite.store.doStoreAction(t.store,t.method,e)}}else"promoted"===e&&this.composite.emit(this.getId()+"-"+t,s)}}bindDOMEvents(){this.el&&this.el.classList.contains("ridge-is-hoverable")&&(this.el.addEventListener("mouseenter",this.handleMouseOver),this.el.addEventListener("mouseleave",this.handleMouseOut)),this.el&&this.el.classList.contains("ridge-is-selectable")&&(this.el.addEventListener("selected",(t=>{Q(t.target,"selected")})),this.el.addEventListener("unselected",(t=>{Q(t.target,"selected",!0)})))}initSubscription(){D(this.config.styleEx)&&Object.values(this.config.styleEx).forEach((t=>{this.composite.store?.subscribe&&this.composite.store.subscribe(t,(()=>{this.forceUpdateStyle()}))})),D(this.config.propEx)&&Object.values(this.config.propEx).forEach((t=>{this.composite.store?.subscribe&&this.composite.store.subscribe(t,(()=>{this.forceUpdateProperty()}))}))}createRenderer(){if(null==this.componentDefinition)return null;const{type:t="vanilla"}=this.componentDefinition;try{switch(t){case"vanilla":this.renderer=new q(this.componentDefinition.component,this.getProperties()),this.renderer.mount(this.el);break;case"react":this.renderer=new G(this.componentDefinition.component,this.getProperties()),this.renderer.mount(this.el)}}catch(t){this.setStatus("render-error",{code:"R_ERR",error:t}),console.error("组件初始化渲染异常",this.componentDefinition,t)}}forceUpdateStyle(){const t={width:this.style.width,height:this.style.height,visible:this.style.visible};this.updateConnectedStyle(),this.updateStyle(),I(t,{width:this.style.width,height:this.style.height,visible:this.style.visible})||this.updateProps()}forceUpdateProperty(){this.updateConnectedProperties(),this.updateProps()}forceUpdate(){this.forceUpdateStyle(),this.forceUpdateProperty()}updateProps(t){t&&Object.assign(this.properties,t),st("updateProps",this.config.id,this.properties),this.renderer&&this.el&&"mounted"===this.el.getAttribute("ridge-mount")?(this.preparePropsBeforeRender(),this.renderUpdate()):st("updateProps umounted",this.getId(),this)}renderUpdate(){const t=this.getProperties();try{st("updateProps",this.config.id,t),this.renderer.updateProps(t)}catch(e){console.error("Render Error:",e,this,t)}}updateConnectedStyle(){if(this.composite.store)for(const t of Object.keys(this.config.styleEx||{}))null!=this.config.styleEx[t]&&""!==this.config.styleEx[t]&&(this.style[t]=this.composite.store.getStoreValue(this.config.styleEx[t],this.getScopedData()))}updateChildStyle(t){this.invoke("updateChildStyle",[t])}updateStyle(){this.el&&(this.el.setAttribute("component",this.config.path),this.el.setAttribute("ridge-id",this.config.id),this.el.setAttribute("ridge-title",this.config.title),this.el.classList.add("ridge-element"),!1===this.style.visible?this.el.classList.add("ridge-runtime-hidden"):this.el.classList.remove("ridge-runtime-hidden"),this.parent&&this.parent.updateChildStyle(this),this.invoke("onStyleUpdated",[this]),this.styleUpdated&&this.styleUpdated())}updateConnectedProperties(){if(this.composite.store&&D(this.config.propEx))for(const[t,e]of Object.entries(this.config.propEx))if(null!=e&&""!==e)if(e.startsWith(z+"."+V)){const[s,o,r]=e.split(".");r&&null!=this.composite.properties[r]&&(this.config.props[t]=this.composite.properties[r])}else try{this.properties[t]=this.composite.store.getStoreValue(e,this.getScopedData())}catch(t){st("updateConnectedProperties Fail",e,t)}}getSlotPropValue(t){return t?(t.parent=this,t.isSlot=!0,"react"===this.componentDefinition.type?K(t):t):null}needPrepareProps(){}prepareSlotProperties(){}preparePropsBeforeRender(){if(!this.componentDefinition)return;if(!D(this.config.props))return;let t=0;for(let e=0;e<(this.componentDefinition.props||[]).length;e++){const s=this.componentDefinition.props[e];if("image"===s.type||"file"===s.type){const t=this.config.props[s.name]||this.properties[s.name];null!=t&&""!==t&&(this.properties[s.name]=this.composite.getBlobUrl(t,this.composite.packageName))}else if("slot"===s.type){delete this.properties[s.name];const e=this.config.props[s.name];if(e){const t=this.composite.getNode(e);this.properties[s.name]=this.getSlotPropValue(t)}else if(Array.isArray(this.children)){for(const t of this.children)t.config.title===s.name&&(this.properties[s.name]=this.getSlotPropValue(t));if(null==this.properties[s.name]){const e=this.children[t];this.properties[s.name]=this.getSlotPropValue(e),t++}}}else if("decorate"===s.type){const t=this.config.props[s.name];t&&(this.properties[s.name]=this.composite.getNode(t))}else"style"===s.type&&(this.properties[s.name]=tt(this.config.props[s.name],this.composite))}}handleMouseOver(t){Q(t.target,"hover")}handleMouseOut(t){Q(t.target,"hover",!0)}clone(){const t=new ot({composite:this.composite,componentDefinition:this.componentDefinition,config:this.config});if(this.children){t.children=[];for(const e of this.children){const s=e.clone();s.parent=t,t.children.push(s)}}return t.isSlot=this.isSlot,t.parent=this.parent,t}invoke(t,e){if(this.renderer)return this.renderer.invoke(t,e)}hasMethod(t){return!!this.renderer&&this.renderer.hasMethod(t)}unmount(){this.isMounted=!1,this.renderer&&(this.renderer.destroy(),this.renderer=null,this.el=null)}}const rt=ot,nt=e()("ridge:composite"),it=class extends X{constructor({id:t,packageName:e,compositePath:s,properties:o,config:r,appPackageObject:n,context:i}){super(),this.id=t,this.config=U(r),this.compositePath=s,this.context=i,this.appPackageObject=n,this.loader=i.loader,this.packageName=e,this.properties=o||r.properties,this.CLASS_LIST=["ridge-composite"],this.dataReady=!0,this._hoveredElements=[]}async loadConfig(){this.config=U(await this.context.loadComposite(this.packageName,this.compositePath)),null!=this.config&&this.config.elements||(this.config=null)}firstPaint(t){nt("Composite FP",t,this.config.compositePath,this.config),t&&(this.el=t),this.initialClassList=Array.from(this.el.classList),this.firstPainted=!0,this.updateStyle(),this.initializeNodes(),this.el.closest('[composite-id="'+this.getCompositeId()+'"]')!==this.el&&this.setStatus("Circular"),this.children=[];for(const t of this.config.children??[]){const e=this.getNode(t);if(e){const t=document.createElement("div");this.el.appendChild(t),e.parent=this,this.children.push(e),e.firstPaint(t)}}}initializeNodes(){this.nodes={};for(let t=0;t<this.config.elements.length;t++){const e=this.createElement(this.config.elements[t]);this.nodes[e.getId()]=e}this.initChildren(),this.events={}}async initialize(){return nt(this.packageName,this.compositePath,"initialize start"),this.config||(this.config=await this.context.loadComposite(this.packageName,this.compositePath)),!!this.config}async loadChildren(){const t=[];this.config||(this.config=await this.context.loadComposite(this.packageName,this.compositePath));for(const e of Object.values(this.nodes))t.push(await e.load());await Promise.allSettled(t)}getCompositeId(){return this.id||`${this.packageName??""}${this.compositePath}`}getNodes(t){const e=Object.values(this.nodes);return t?e.filter(t):e}getNode(t){return this.nodes[t]}getRootNode(t){return this.children.filter((e=>e.id===t))[0]}getBlobUrl(t){return this.context.getBlobUrl(t,this.packageName)}initChildren(){this.config.children?this.children=Array.from(new Set(this.config.children)).map((t=>this.nodes[t])).filter((t=>t)):this.children=Object.values(this.nodes).filter((t=>null==t.config.parent));for(const t of this.children)t.parent=this,t.initChildren()}createElement(t){return new rt({composite:this,config:t})}getJsModules(){return this.jsModules||[]}async mount(t,e){nt("Composite Moute: ",this.packageName,this.compositePath);try{this.beforeMount&&this.beforeMount(t)}catch(t){}if(t&&(this.el=t,t.ridgeComposite&&t.ridgeComposite.unmount(),this.el.ridgeComposite=this),this.removeStatus(),this.config||(nt("Loading Config",this.packageName,this.compositePath),this.setStatus("Loading"),await this.loadConfig()),this.removeStatus("Loading"),!this.config)return this.setStatus("Page-not-found"),nt("Config Not Found",this.packageName,this.compositePath),void(this.onPageNotFound&&this.onPageNotFound(this));if(this.firstPainted||this.firstPaint(),this.appPackageObject||(nt("Load PackageJSON",this.packageName,this.compositePath),this.appPackageObject=await this.context.loadAppPackageJSON(this.packageName)),e&&(nt("Apply theme",this.packageName,this.compositePath),window.ridgeTheme={},this.appPackageObject.themes))for(const t of Object.keys(this.appPackageObject.themes))window.ridgeTheme[t]=this.appPackageObject.themes[t];await this.importJSFiles(),await this.loadStore(),this.updatePromotedElement(),this.dataReady=!0,nt("JS Imported: ",this.packageName,this.compositePath),this.emit("postMount"),this.postMount&&await this.postMount(),nt("Mount Root Elements: ",this.packageName,this.compositePath);const s=[];for(const t of this.children??[])s.push(t.mount());await Promise.allSettled(s),nt("Mounted Roots ",this.packageName,this.compositePath),this.initializeEvents(),this.emit("mounted"),this.mounted&&this.mounted(),this.importFontFiles()}async mountRootComponents(){}unmount(){if(this.el.className=this.initialClassList.join(" "),this.el.removeAttribute("composite-id"),this.config){for(const t of this.children){const e=t.el;try{t.unmount()}catch(t){}e&&e.parentElement===this.el&&this.el.removeChild(e)}this.store&&this.store.destory()}this.el.removeEventListener("mouseover",this.handleMouseOver),this.el.removeEventListener("mouseout",this.handleMouseOut)}updateStyle(){if(this.el.setAttribute("composite-id",this.getCompositeId()),this.config&&this.config.style&&this.el){this.el.style.background="",this.config.style.widthFix?(this.el.style.width=this.config.style.width+"px",this.el.style.overflowX="hidden"):this.el.style.width="100%",this.config.style.heightFix?(this.el.style.height=this.config.style.height+"px",this.el.style.overflowY="hidden"):this.el.style.height="100%";const t=tt(this.config.classList,this);this.el.className=[...this.initialClassList,"ridge-composite",...this.CLASS_LIST,...t].join(" ")}}updateChildStyle(t){if(t.el)if(t.config.full)t.el.classList.add("ridge-is-full"),t.el.style.transform="none",t.el.style.width="",t.el.style.height="";else{const e=t.style;t.el.classList.remove("ridge-is-full"),t.el.style.position="absolute",t.el.style.left=0,t.el.style.top=0,t.el.style.transform=`translate(${e.x}px, ${e.y}px)`,t.el.style.width=e.width?h(e.width):"",t.el.style.height=e.height?h(e.height):"",e.portalled&&!this.isEdit&&(t.el.style.width=0,t.el.style.height=0)}}getScopedData(){return[]}async importJSFiles(){const{jsFiles:t}=this.config;nt("Load importJSFiles",this.packageName,this.compositePath,t);const e=[];for(const s of t??[])try{const t=await this.context.loadModule(this.packageName,s);if(t&&t.default){const o=t.default;o.filePath=s,t.jsContent&&(o.jsContent=t.jsContent),e.push(o)}}catch(t){console.error("JS Module Load Fail: ",this.packageName+"/"+s)}this.jsModules=e}importFontFiles(){const{fontFiles:t}=this.config;if(this.fontList=[],t)for(const e of t)nt("loadWebFont",e),this.fontList.push({label:e.split("/").pop(),value:l(e)}),this.loader.loadWebFont(e)}initializeEvents(){this.el.onclick=t=>{t.target===this.el&&this.emit("onClick",[t])}}handleMouseOver(t){if(this.currentHoverTarget=t.target,window.requestAnimationFrame((()=>{this.setHoveredElementClassList()})),t.target.contains(t.relatedTarget))return;const e=t.target.classList;for(let s=0;s<e.length;s++)if(e[s].startsWith("hover:")){const o=e[s].substring(6);t.target.classList.add(o)}}setHoveredElementClassList(t){for(const t of this._hoveredElements)this.setHoveredClassList(t,!0)}setHoveredClassList(t,e){const s=t.classList;let o=!1;for(let r=0;r<s.length;r++)if(s[r].startsWith("hover:")){o=!0;const n=s[r].substring(6);e?t.classList.remove(n):t.classList.add(n)}return o}handleInternalEventConfig(t,e){if(this.config.events&&this.config.events[t])for(const s of this.config.events[t])s.store&&s.method&&this.store.doStoreAction(s.store,s.method,{payload:e,eventArgs:s.payload})}on(t,e){this.events[t]=e}emit(t,e){this.handleInternalEventConfig(t,e),this.events[t]&&this.events[t](e??[]),this.properties[t]&&"function"==typeof this.properties[t]&&this.properties[t].call(null,e)}setProperties(t){this.properties=t,this.store&&this.store.setProperties(this.properties),this.updatePromotedElement()}updatePromotedElement(){if(this.nodes)for(const t of Object.values(this.nodes))for(const[e,s]of Object.entries(t.config.propEx||{}))if("string"==typeof s&&s.startsWith(z+"."+V)){const[o,r,n]=s.split(".");this.properties[n]&&(t.config.props[e]=this.properties[n],t.forceUpdateProperty())}}async loadStore(){nt("Load loadStore",this.packageName,this.compositePath,this.jsModules,this.properties),this.store=new H(this);try{this.store.load(this.jsModules,this.properties)}catch(t){console.error("Store Load Fail: ",t)}}async loadScript(t){await this.loader.loadScript(t)}};window.createDebug=e();const at=class{constructor({baseUrl:t,loadPropControl:e}){this.VERSION="1.4.0",this.baseUrl=t,console.log("Ridge Runtime  Version:1.4.0, baseUrl:"+this.baseUrl);const s=new C({baseUrl:this.baseUrl,loadPropControl:e});this.loader=s,this.services={loader:s}}parseRidgePath(t){const e=t.split("/").filter((t=>t));if(e[0].startsWith("@")){if(e.length>=3){const[t,s,...o]=e;return{packageName:t+"/"+s,compositePath:o.join("/")}}return null}if(e.length>=2){const[t,...s]=e;return{packageName:t,compositePath:s.join("/")}}return null}createCompositeByPath(t,e={}){const s=this.parseRidgePath(t);return s?new it({context:this,packageName:s.packageName,compositePath:s.compositePath,properties:e}):null}createComposite(t,e,s){try{return new it({context:this,packageName:t,compositePath:e.startsWith("/")?e:"/"+e,properties:s})}catch(t){return console.error("createComposite error",t),null}}async loadComposite(t,e){if(e){const s=e.endsWith(".json")?e:e+".json";return this.loader.loadJSON(`${t}/${s}`)}{const e=t.endsWith(".json")?t:t+".json";return this.loader.loadJSON(e)}}getBlobUrl(t,e){return t.startsWith("http")||t.startsWith("data:")||t.startsWith("blob:")||t.startsWith("/")?t:t.startsWith("composite://")?e?this.baseUrl+"/"+e+u(t.substring(12)):this.baseUrl+u(t.substring(12)):this.baseUrl+"/"+t}async loadAppPackageJSON(t){const e=await this.loader.getPackageJSON(t);return this.applyPackageObjectSetting(e),e}async loadFileContent(t){return this.loader.loadTextContent(t)}async loadModule(t,e){let s="";return e.startsWith("composite://")?s=("/"+t+"/"+e.substring(12)).replace(/\/\//g,"/"):e.startsWith("/")&&(s=e),g(s)}async loadScript(t){return this.loader.loadScript(t)}async loadPlugin(t){let e=t;if("string"==typeof t&&(e=await this.loader.getPackageJSON(t)),await this.loader.confirmPackageDependencies(e.name),e.plugin){const t=(await g("/"+e.name+"/"+e.plugin)).default;return t.packageName=e.name,t}}async applyEffect(t,e,s){try{if(!t||"string"!=typeof t)return;const[o,r]=t.split("/"),n=await this.loadPlugin(o);n&&n.apply&&n.apply(r,e,(()=>{s&&s()}))}catch(t){console.error("Apply Plugin Error",t)}}applyPackageObjectSetting(t){if(t.global&&D(t.global))for(const[e,s]of Object.entries(t.global))globalThis.hasOwnProperty(e)||(globalThis[e]=s)}};window.RidgeContext=at;const ct=window.showError||(()=>{});(async()=>{try{const{baseUrl:t,appName:e}=function(){const t=window.location.pathname.split("/").filter((t=>t));let e="/",s="";return t.length>=2?t[t.length-2].startsWith("@")?(s=t.join("/"),e="/"+t.slice(0,-2).join("/")):(s=t[t.length-1],e="/"+t.slice(0,-1).join("/")):s=t[0]||"",{baseUrl:e,appName:s}}(),s=new URLSearchParams(window.location.search),o=window.RIDGE_NPM_REPO||t||"/",r=window.RIDGE_HOME_APP||e,n=document.getElementById("app");if(!n)return void ct('页面未包含 <div id="app" /> ');if(!r)return void ct("访问地址或RIDGE_HOME_APP未定义应用名称");window.ridge=new at({baseUrl:o});const i=await window.ridge.loadAppPackageJSON(r);if(!i)return void(window.showError&&window.showError(`当前应用(${r})未找到`));const a=(()=>{const t=window.innerWidth;return t<768?"mobile":t<1200?"tablet":"desktop"})(),c=window.RIDGE_HOME_PATH||window.location.hash.substring(2)||s.get("path")||i.ridgeEntries?.[a]||"index";console.log("pagePath",c),n.setAttribute("composite-hash",c);const l=window.ridge.createComposite(r,c,{});await l.mount(n,!0),window.addEventListener("hashchange",(()=>{const t=window.location.hash.substring(2)||i.ridgeEntries?.[a]||"index";n.getAttribute("composite-hash")!==t&&(n.setAttribute("composite-hash",t),window.ridge.createComposite(r,t,{}).mount(n,!0))}))}catch(t){ct(`发生未知错误: ${t.message}  堆栈跟踪： ${t} ${t.stack}`)}})()})()})();